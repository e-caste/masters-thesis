WEBVTT

1
00:00:00.560 --> 00:00:04.040 
Dear learners welcome back to
our openHPI online course

2
00:00:04.040 --> 00:00:08.170 
on Cyber Threats: Malware. Today,
we will have a closer look into

3
00:00:08.170 --> 00:00:11.330 
the topics of firewalls,
how they actually work,

4
00:00:11.850 --> 00:00:16.700 
what the core principles are and what kinds
of firewalls there are to differentiate.

5
00:00:17.190 --> 00:00:21.180 
So, let's take a broad approach,
firewalls are security measures

6
00:00:21.180 --> 00:00:26.130 
that protect individual computers or phone
network from unwanted network traffic.

7
00:00:26.300 --> 00:00:30.980 
What does that mean? So, we might have a
firewall sitting on a local computer

8
00:00:31.280 --> 00:00:35.590 
or we might have a firewall sitting in
front of an entire network that protects

9
00:00:35.950 --> 00:00:39.190 
whatever is behind it from
unwanted network traffic.

10
00:00:39.720 --> 00:00:45.080 
Okay so, this means the firewall needs to
monitor incoming and outgoing connections,

11
00:00:45.460 --> 00:00:50.250 
yes, even outgoing connections from a
network could be unwanted network traffic.

12
00:00:50.590 --> 00:00:55.950 
Maybe a device on the network wants to
communicate to a malicious website,

13
00:00:56.170 --> 00:00:59.840 
so we do not want that network
traffic and therefore we need

14
00:00:59.840 --> 00:01:03.790 
to monitor outgoing connections just
as well as incoming connections.

15
00:01:04.310 --> 00:01:08.580 
And then the firewall's capability
is that it is able to deny

16
00:01:08.580 --> 00:01:12.230 
or block unauthorized connections.
So, whichever connections

17
00:01:12.230 --> 00:01:15.530 
there are that we do not want
to have in our scenario,

18
00:01:16.060 --> 00:01:19.940 
we are able to block them or
deny them so that they cannot

19
00:01:19.940 --> 00:01:22.190 
pass through, the packets
don't get forwarded.

20
00:01:23.290 --> 00:01:25.930 
This means that whenever
we have firewalls set up

21
00:01:26.340 --> 00:01:30.360 
correctly, we will have improved
security against attacks

22
00:01:31.160 --> 00:01:35.590 
and against which attacks: for example,
against attacks from Botnets or Backdoors.

23
00:01:35.850 --> 00:01:39.960 
So, if we would have a device on our
network which somehow got infected

24
00:01:40.210 --> 00:01:44.450 
by some sort of botnet then this
device would need some kind

25
00:01:44.450 --> 00:01:48.740 
of connection to or from the
attacker in advance of actually

26
00:01:48.780 --> 00:01:53.440 
activating, because the attacker would need
to send some kind of activation command

27
00:01:53.680 --> 00:01:57.280 
to our device and if we have
a proper firewall in place

28
00:01:57.910 --> 00:02:02.060 
we can exactly block those
connections or can raise alarms

29
00:02:02.060 --> 00:02:06.260 
based on those connections, so
that the malware cannot properly

30
00:02:06.260 --> 00:02:10.030 
activate and that our device cannot
be made a bot in a botnet.

31
00:02:11.460 --> 00:02:16.620 
So, how do firewalls work? One core
principle is about the Firewall-Rules.

32
00:02:16.940 --> 00:02:20.960 
The Firewall-Rules define which
connections or which network

33
00:02:20.970 --> 00:02:24.830 
traffic is allowed or not allowed,
which means that the rules

34
00:02:24.830 --> 00:02:30.640 
can be specific to protocols, to ports, to
clients, to sources or to destinations,

35
00:02:30.890 --> 00:02:35.640 
which would mean we can
define very fine-grained

36
00:02:36.310 --> 00:02:41.380 
rules based on maybe this client
is accessed on this port using

37
00:02:41.380 --> 00:02:45.440 
this protocol which is exactly
the connection we want to allow

38
00:02:45.440 --> 00:02:48.940 
and any other protocols on this
port or any other ports on

39
00:02:48.940 --> 00:02:50.470 
this client will
not be allowed.

40
00:02:52.450 --> 00:02:56.930 
Rules can also consist of any, as in
the example that I just laid out as

41
00:02:57.120 --> 00:02:59.790 
of any connection or
combination of any of the

42
00:03:00.810 --> 00:03:04.460 
things above of any of the
criteria, so the protocols, ports

43
00:03:05.060 --> 00:03:08.030 
and if we look further
the Firewall-Rules

44
00:03:08.990 --> 00:03:14.120 
then will be applied by checking
whenever a network packet comes in,

45
00:03:14.260 --> 00:03:18.700 
does this match the rule and if a
packet matches a rule, so we have

46
00:03:18.710 --> 00:03:22.990 
the rule defined, a packet comes into our
network and the packet matches the rule,

47
00:03:23.160 --> 00:03:26.860 
we can then decide what to do
with the packet. Either it is

48
00:03:26.860 --> 00:03:31.000 
an allowed packet in which case we
might accept it or maybe it is a

49
00:03:31.770 --> 00:03:35.710 
denied or not allowed packet and
in this case, we could reject

50
00:03:35.710 --> 00:03:37.180 
or deny network
traffic.

51
00:03:38.010 --> 00:03:41.890 
There's always the opportunity
of the option to forward the

52
00:03:41.890 --> 00:03:46.060 
packages to any other destination
device, so for example,

53
00:03:46.520 --> 00:03:52.250 
the package comes in the target device
- one central computer and then

54
00:03:52.450 --> 00:03:57.590 
however, the packet matches a
rule which says that the packet

55
00:03:57.610 --> 00:04:02.300 
should be moved to any other computer may
be due to some sort of load balancing,

56
00:04:02.700 --> 00:04:04.430 
then the packages
can be forwarded

57
00:04:05.270 --> 00:04:08.610 
and the packages can also be
monitored. So, in this case there

58
00:04:08.610 --> 00:04:12.790 
would be a rule where we say "hey,
this is something which might

59
00:04:12.790 --> 00:04:16.070 
be malicious but we don't want
to block it right away because

60
00:04:16.210 --> 00:04:22.780 
the user would have big troubles then or maybe
the user's work would get intervened".

61
00:04:23.460 --> 00:04:27.540 
So, we would just mark this packet
to be monitored by any monitoring

62
00:04:27.540 --> 00:04:28.780 
system which is set up,

63
00:04:29.460 --> 00:04:32.210 
so that later on, one can
have a look at it again.

64
00:04:33.230 --> 00:04:37.970 
Finally, packages can also be
modified, so for example, if there's

65
00:04:37.970 --> 00:04:42.140 
anything that sounds or maybe looks
slightly malicious in the package

66
00:04:42.490 --> 00:04:45.640 
then this can be removed and
the packet can be forwarded.

67
00:04:46.570 --> 00:04:51.180 
Just as well any source, any
destination, any sender or receiver

68
00:04:51.180 --> 00:04:53.390 
information can be modified
in such packages

69
00:04:54.070 --> 00:04:59.100 
and there are many more things that can be
done in any individual network settings.

70
00:05:00.410 --> 00:05:05.860 
So, finally whenever these
Firewall rules are applicable,

71
00:05:06.950 --> 00:05:11.730 
the packages will be treated based
on those rules but if there's

72
00:05:11.890 --> 00:05:14.990 
a packet which comes in and
which is not matching any rule

73
00:05:14.990 --> 00:05:18.700 
that we have defined, this
package will be treated based

74
00:05:18.700 --> 00:05:23.680 
on the standard policy and the standard policy
for those, we define basically two of them.

75
00:05:23.930 --> 00:05:29.790 
One is the Whitelisting policy which says that
allowed connections are listed explicitly,

76
00:05:30.240 --> 00:05:34.190 
everything else will be rejected,
which means whenever we have

77
00:05:34.190 --> 00:05:36.750 
a user which wants to
access some web page,

78
00:05:37.460 --> 00:05:41.040 
all of those
connections be

79
00:05:41.580 --> 00:05:46.370 
very fine-grained or rather
coarse-grained, all those connections

80
00:05:46.370 --> 00:05:50.990 
have to be listed explicitly, so that
the user can access the web pages

81
00:05:51.280 --> 00:05:54.530 
but everything else will be
rejected, which would mean that

82
00:05:54.680 --> 00:05:58.420 
if we, for example, forget to
whitelist one particular site, the

83
00:05:58.420 --> 00:06:01.010 
user will not be able to
access that website.

84
00:06:02.250 --> 00:06:07.900 
The alternative is Blacklisting: Blacklisting
means that we disallow connections

85
00:06:08.420 --> 00:06:12.210 
and disallow those connections
explicitly which would mean

86
00:06:12.210 --> 00:06:17.780 
that any connection which is not listed
in the disallow list, in the blacklist,

87
00:06:18.010 --> 00:06:20.870 
everything that is not listed
in there will be accepted.

88
00:06:21.470 --> 00:06:26.010 
Both solutions have some advantages
and some disadvantages.

89
00:06:26.310 --> 00:06:28.790 
Both are very hard to
maintain properly

90
00:06:29.270 --> 00:06:33.050 
and it is up to every individual
situation to decide whether

91
00:06:33.050 --> 00:06:37.270 
a whitelist or blacklist is
rather fitting in this context.

92
00:06:38.820 --> 00:06:43.810 
Let's look into the states of
firewalls for a bit, so rules can

93
00:06:43.810 --> 00:06:46.670 
be applied at different stages
of the packet processing

94
00:06:47.240 --> 00:06:51.090 
and that might be, for
example, from the internet

95
00:06:51.090 --> 00:06:54.810 
the packet is coming in and is
being received by a firewall

96
00:06:55.050 --> 00:06:58.360 
or maybe the packet might be in
the forwarding state to a client

97
00:06:58.360 --> 00:07:00.610 
and then received by a
firewall on the client,

98
00:07:01.540 --> 00:07:05.360 
or maybe the picket is outgoing, so we
have different stages that we can

99
00:07:05.630 --> 00:07:08.170 
receive and analyze
packages.

100
00:07:08.790 --> 00:07:12.420 
Therefore in the definition of
the rule, we need to have

101
00:07:12.420 --> 00:07:15.740 
some sort of mention of the
state of the connection.

102
00:07:17.180 --> 00:07:20.060 
So, for example, for email
which is to be sent out,

103
00:07:20.480 --> 00:07:25.570 
we have a connection which has a
connection from Client A to Client B on

104
00:07:25.570 --> 00:07:30.440 
port 443 for the sending of an
email, this might be allowed

105
00:07:30.820 --> 00:07:36.270 
and vice versa. So, from B to
A on port 443 for receiving,

106
00:07:36.280 --> 00:07:38.440 
this might be a connection
that is allowed.

107
00:07:41.120 --> 00:07:44.300 
When we look at the states of the
firewall, we also need to look at

108
00:07:44.300 --> 00:07:48.770 
Stateful Package Inspection.
Stateful Package Inspection

109
00:07:49.270 --> 00:07:53.500 
is called a fairly new approach,
not really new in terms of

110
00:07:53.530 --> 00:07:57.590 
within the last 2 or 3 years but it has
not been there from the beginning

111
00:07:58.130 --> 00:08:02.350 
and the idea is that the rules can be
dependent on the state of the connection.

112
00:08:03.080 --> 00:08:07.330 
In general, this allows a
way easier and more secure

113
00:08:07.830 --> 00:08:10.410 
definition or configuration
of systems,

114
00:08:11.220 --> 00:08:14.150 
because let's look
at two examples:

115
00:08:15.320 --> 00:08:18.210 
In our example, we have
an internet firewall

116
00:08:18.740 --> 00:08:22.460 
in between and a client which is
located behind the firewall.

117
00:08:23.220 --> 00:08:28.050 
For the first example, we have a first
connection coming in from the internet

118
00:08:28.390 --> 00:08:32.810 
to the client, in this case, there's
no previous connection bin,

119
00:08:32.810 --> 00:08:36.650 
there is no proper rules bin, so the
firewall will deny the connection.

120
00:08:37.960 --> 00:08:40.480 
So, the connection will
not reach the client.

121
00:08:40.920 --> 00:08:46.060 
However, what if for a second
example, our first connection

122
00:08:46.060 --> 00:08:49.540 
will be going from the client to
the internet. For example, the

123
00:08:49.540 --> 00:08:52.200 
client wanted to open a
website on the internet

124
00:08:52.670 --> 00:08:53.330 
and then

125
00:08:54.970 --> 00:08:58.560 
the firewall will have a short
look at the connection and will

126
00:08:58.560 --> 00:09:02.510 
say "ok, maybe this is allowed for
clients to communicate to the internet"

127
00:09:03.010 --> 00:09:06.010 
and will also memorise that there
has been a connection from

128
00:09:06.010 --> 00:09:08.950 
this client to this
destination on the internet

129
00:09:10.140 --> 00:09:15.720 
and then whenever there's the response
from that internet device to the client,

130
00:09:16.040 --> 00:09:21.050 
so basically the same packet
that is sent as in our first

131
00:09:21.050 --> 00:09:24.880 
example, we have a device on the
internet sending a response or

132
00:09:25.220 --> 00:09:28.370 
some package to our client
on our internal network

133
00:09:28.830 --> 00:09:34.040 
but because we allow responses,
so packages sent back after an

134
00:09:34.350 --> 00:09:37.110 
initial connection has been
opened from the inside,

135
00:09:37.560 --> 00:09:41.380 
this in the second scenario, the
package is allowed to reach

136
00:09:41.380 --> 00:09:43.480 
its destination on
our local network.

137
00:09:45.160 --> 00:09:49.260 
So, with this Stateful Package
Inspection, it is able to, or in

138
00:09:49.260 --> 00:09:54.700 
theory one could say, deny anything that
is coming in from an external network,

139
00:09:54.870 --> 00:10:00.030 
except for, if we have a connection
from a client to the outside first.

140
00:10:00.320 --> 00:10:03.610 
Obviously, this has some other
security risks with it

141
00:10:04.520 --> 00:10:10.010 
but let's not dive into too much detail
everywhere, because we could spend

142
00:10:10.320 --> 00:10:12.420 
always just talking
about those topics.

143
00:10:13.130 --> 00:10:19.310 
So, finally what we need to differentiate as well is
Local firewalls versus Network-based firewalls.

144
00:10:19.740 --> 00:10:23.470 
Local based local firewalls are
run only on the systems on

145
00:10:23.470 --> 00:10:26.930 
which they are installed. So, maybe
we have a couple of different

146
00:10:26.940 --> 00:10:31.640 
systems connected to the internet
and we have one firewall installed

147
00:10:31.920 --> 00:10:33.750 
in each of these
systems.

148
00:10:34.420 --> 00:10:39.430 
So, we have the ability to monitor all
incoming and outgoing connections

149
00:10:39.880 --> 00:10:44.330 
from the device to the
device. So, the firewall

150
00:10:44.330 --> 00:10:48.050 
on the local device will only be
able to monitor traffic which

151
00:10:48.050 --> 00:10:50.220 
is directed at that
device exactly.

152
00:10:51.040 --> 00:10:56.670 
So, this brings the possibility for very
system specific and very detailed settings,

153
00:10:56.880 --> 00:11:00.720 
for example, an administrator who's
in charge of one particular system

154
00:11:00.980 --> 00:11:05.740 
heher firewall just as hisher
system needs it and therefore be

155
00:11:06.410 --> 00:11:09.570 
able to generate the most secure
settings for his/her system.

156
00:11:10.840 --> 00:11:14.590 
On the other hand, we have Network-based
firewalls: Network-based

157
00:11:14.590 --> 00:11:18.700 
firewalls monitor all the connections
going through the network.

158
00:11:19.100 --> 00:11:23.660 
So, the idea would be that from
the internet we have some kind

159
00:11:23.660 --> 00:11:27.710 
of connection to our local network
and before any connection

160
00:11:27.710 --> 00:11:31.370 
passes into the local network, we
will have the firewall which

161
00:11:31.370 --> 00:11:32.920 
protects the
entire network.

162
00:11:33.810 --> 00:11:37.440 
Typically those firewalls are
installed on the central network

163
00:11:37.440 --> 00:11:39.940 
components, such as for
example, the gateway

164
00:11:40.440 --> 00:11:44.520 
and the firewalls could also be
installed on other internal

165
00:11:44.520 --> 00:11:48.720 
network components to monitor
internal connections. So, maybe

166
00:11:48.720 --> 00:11:52.870 
we have several different local
networks and devices from one

167
00:11:52.870 --> 00:11:55.350 
network want to communicate
with one another network

168
00:11:55.890 --> 00:12:00.150 
and then we could have firewalls
installed on the switch, on

169
00:12:00.150 --> 00:12:03.140 
the router which is connecting
the different local networks

170
00:12:03.470 --> 00:12:05.580 
and even there we could
monitor the traffic.

171
00:12:07.030 --> 00:12:11.530 
The settings that we put upon
those devices, they apply to

172
00:12:12.430 --> 00:12:18.590 
all network devices which would mean
that all network devices which are

173
00:12:19.350 --> 00:12:22.860 
particularly configured in the
rules. So, obviously we still

174
00:12:22.860 --> 00:12:27.590 
have the opportunity to configure a
rule on a network-based firewall,

175
00:12:27.760 --> 00:12:32.920 
where the rule says that only packages which
are supposed to reach that destination

176
00:12:33.200 --> 00:12:38.990 
are to be altered by this rule, are
to be monitored by this rule,

177
00:12:39.460 --> 00:12:43.610 
but in general whenever we put
something which is not device-

178
00:12:43.610 --> 00:12:47.220 
specific in there, so something
like whitelist every connection

179
00:12:47.220 --> 00:12:51.190 
to the internet from the inside
network, then this applies to

180
00:12:51.190 --> 00:12:55.610 
all the network devices that we have
installed in that network itself.

181
00:12:56.010 --> 00:13:00.240 
So, this would mean that we have the
security for each individual device,

182
00:13:00.460 --> 00:13:04.550 
simplified, because one central
administrator will take care

183
00:13:04.550 --> 00:13:08.580 
of the firewall settings, of the central
firewall settings, but potentially

184
00:13:08.580 --> 00:13:13.930 
the security is not as high as if
we were to install the firewall

185
00:13:13.930 --> 00:13:15.370 
on each device itself.

186
00:13:16.480 --> 00:13:21.120 
That brings us to the end
of the core ideas or core

187
00:13:21.850 --> 00:13:25.060 
aspects of firewalls or
core differentiation.

188
00:13:25.750 --> 00:13:28.490 
I hope you learnt something new
and I look forward to seeing

189
00:13:28.490 --> 00:13:29.580 
you in our next video.
