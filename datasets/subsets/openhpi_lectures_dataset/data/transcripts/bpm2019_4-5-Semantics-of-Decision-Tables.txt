WEBVTT

1
00:00:00.670 --> 00:00:04.210 
Welcome to video clip five in
which we discuss the semantics

2
00:00:04.210 --> 00:00:05.350 
of decision tables.

3
00:00:07.450 --> 00:00:12.110 
In general the semantics of decision
table is answering the question how

4
00:00:12.330 --> 00:00:15.990 
is output derived from the
input of the decision.

5
00:00:17.060 --> 00:00:22.380 
And the semantics of the decision table
is determined by so called hit policy.

6
00:00:23.180 --> 00:00:28.100 
In general DMN has two types
of hit policies so there

7
00:00:28.100 --> 00:00:32.620 
are a number of single hit policies
and a number of multi hit policies.

8
00:00:33.450 --> 00:00:35.200 
In single hit policies

9
00:00:36.010 --> 00:00:43.260 
the output of the decision is
always exactly based on one

10
00:00:43.390 --> 00:00:48.250 
rule or one row. So this is why
it's called single hit because

11
00:00:48.250 --> 00:00:53.260 
there is always a single hit and the output
is then the output of the decision.

12
00:00:54.610 --> 00:00:59.070 
That's different in multi-hit policies.
In multi-hit policies the output

13
00:00:59.260 --> 00:01:03.220 
of several rules can be used
to determine the output.

14
00:01:03.730 --> 00:01:09.580 
So several outputs are returned
or an aggregate aggregate value

15
00:01:09.580 --> 00:01:13.580 
based on these several
outputs is returned.

16
00:01:15.120 --> 00:01:19.340 
So let's start with single hit policies
and in particular the unique

17
00:01:19.630 --> 00:01:28.610 
single hit policy. Here for any given
input combination exactly one rule

18
00:01:28.730 --> 00:01:35.200 
matches. So that is the most
restrictive if you want a hit policy

19
00:01:35.360 --> 00:01:39.990 
where you allow for any given
input combination exactly one

20
00:01:40.000 --> 00:01:43.000 
rule that we have in the
decision table matches.

21
00:01:43.540 --> 00:01:49.310 
We like to illustrate these
single hits policy unique by

22
00:01:49.500 --> 00:01:55.200 
by a decision table talking
about a health risk.

23
00:01:56.120 --> 00:01:59.750 
So here is of course another
made-up example but I hope

24
00:01:59.760 --> 00:02:04.440 
I can use it to communicate the semantics
of the unique single hit policy.

25
00:02:05.010 --> 00:02:10.570 
Here we have input input age
medical history and therefore

26
00:02:10.570 --> 00:02:14.210 
we compute the
health risk level

27
00:02:15.210 --> 00:02:19.450 
and we'll have here the upper left
part we have here the letter

28
00:02:19.580 --> 00:02:23.610 
U and the U stands of course
for unique hit policy.

29
00:02:25.150 --> 00:02:30.320 
So when the age is below twenty
and the medical history is good

30
00:02:30.320 --> 00:02:32.170 
the health risk
level is low,

31
00:02:33.270 --> 00:02:37.640 
and if it's below twenty and the
medical history is bad then

32
00:02:37.640 --> 00:02:39.150 
is medium and so forth.

33
00:02:40.560 --> 00:02:46.190 
We can now see that there is
exactly one for each input

34
00:02:46.190 --> 00:02:51.850 
combination of age and medical
history there is always exactly one

35
00:02:52.270 --> 00:02:56.180 
row that matches and therefore
unique is satisfied here.

36
00:02:58.930 --> 00:03:03.280 
The unique hit policy should be
used in most cases because it

37
00:03:03.280 --> 00:03:06.650 
guarantees that for each input
combination exactly one rule

38
00:03:06.650 --> 00:03:10.590 
matches and it provides a very
clear very specific semantics.

39
00:03:13.280 --> 00:03:16.790 
Next single hit policy, the
so called any hit policy.

40
00:03:17.710 --> 00:03:24.140 
So here for a given combination of
input values several rules can match.

41
00:03:24.400 --> 00:03:29.720 
But all of the matching rules must
return the same output value.

42
00:03:30.510 --> 00:03:34.150 
So for an input combination we
can have several rules that

43
00:03:34.150 --> 00:03:37.570 
match but all of them have
to agree on the output.

44
00:03:37.990 --> 00:03:41.580 
And therefore we can choose any
of the matching rules and that

45
00:03:41.580 --> 00:03:45.840 
gives of course that is the name
any. We can choose any of the

46
00:03:45.840 --> 00:03:48.690 
matching rules to compute the
output of the decision.

47
00:03:50.230 --> 00:03:54.610 
Here we have another example
from the credit area.

48
00:03:55.620 --> 00:04:00.810 
So the output here is credit
policy compliance and the

49
00:04:00.810 --> 00:04:04.300 
input is I get a credit
rating the first column

50
00:04:04.700 --> 00:04:08.920 
I get credit card balance so
what is on the credit card

51
00:04:09.230 --> 00:04:13.740 
and we have a personal loan balance.
These are the three input values

52
00:04:13.740 --> 00:04:17.310 
and depending on these input
values the output is computed.

53
00:04:18.790 --> 00:04:22.950 
And here we have the A here
the upper left part on the

54
00:04:22.950 --> 00:04:26.950 
upper left box of
the decision table

55
00:04:27.360 --> 00:04:30.450 
and therefore it is the any of
the semantics of this decision

56
00:04:30.450 --> 00:04:33.110 
table is any single
hit policy.

57
00:04:33.760 --> 00:04:37.350 
So if the credit rating is
a the credit card balance

58
00:04:37.350 --> 00:04:41.030 
is below twenty thousand and the
personal loan balances below

59
00:04:41.030 --> 00:04:45.380 
fifty thousand then we have compliance so
the output of the decision is compliant

60
00:04:46.130 --> 00:04:50.580 
and it is not compliant if
the credit rating is not a

61
00:04:50.770 --> 00:04:56.090 
regardless of the other two input values,
so don't care for the other input values

62
00:04:56.950 --> 00:05:02.210 
and if the credit card balance is
more than twenty thousand or

63
00:05:02.430 --> 00:05:05.760 
smaller greater or equal twenty
zero hundred it's not compliant

64
00:05:05.970 --> 00:05:09.000 
regardless of the other input
it's also not compliant.

65
00:05:09.550 --> 00:05:15.620 
And if the personal loan balance is
greater or equal fifty thousand also

66
00:05:15.730 --> 00:05:22.160 
not compliant. So looking for instance
as the input combination not a

67
00:05:22.290 --> 00:05:28.510 
ten thousand sixty thousand we see that
these input combination matches rules two

68
00:05:28.740 --> 00:05:34.840 
and four. Also it's not to a and the
others don't care so it matches two.

69
00:05:35.820 --> 00:05:40.890 
And it also matches a rule four because
sixty thousand is exceeds fifty thousand

70
00:05:41.190 --> 00:05:46.420 
therefore we have matches for
rows two and four. But here

71
00:05:46.420 --> 00:05:52.170 
we see that in both cases in row two the
result is not compliant and in row four

72
00:05:52.340 --> 00:05:56.710 
the output is not compliant
and therefore we can choose

73
00:05:56.720 --> 00:06:03.010 
any to return the output of the decision
so that is the semantics of the any

74
00:06:03.200 --> 00:06:04.340 
single hit policy.

75
00:06:07.130 --> 00:06:13.610 
There's also a hit policy called
priority and here for a given input

76
00:06:13.950 --> 00:06:18.490 
several rules are allowed to match
just like the any and also

77
00:06:18.490 --> 00:06:21.970 
the output of these rules can be
different. So these rules might

78
00:06:21.970 --> 00:06:23.570 
have different
output values.

79
00:06:24.350 --> 00:06:27.660 
So how do we choose then a the
output because it's a single

80
00:06:27.660 --> 00:06:32.110 
hit policy, therefore we just can return
a single output of the decision. Well

81
00:06:32.790 --> 00:06:38.330 
the priority is determined
by ordering in the output

82
00:06:38.340 --> 00:06:42.370 
domain by the ordering of the values
in the output domain. So that is

83
00:06:42.730 --> 00:06:46.990 
important here. We have another
example to illustrate

84
00:06:47.490 --> 00:06:51.400 
this concept where we have
age and medical history as

85
00:06:51.400 --> 00:06:56.390 
input and we have risk level as
output and here we see that

86
00:06:56.590 --> 00:07:00.370 
the input combination
seventy bad matches

87
00:07:01.080 --> 00:07:06.050 
matches several rules, so matches rules
three and four, right. Matches rules three

88
00:07:06.160 --> 00:07:11.670 
and four and well these have
different outputs like high

89
00:07:11.680 --> 00:07:17.150 
and medium. That's fine. But the
health risk level is ordered

90
00:07:17.150 --> 00:07:21.380 
so the domain is ordered. So we
have low medium and high and

91
00:07:21.380 --> 00:07:25.230 
so we can use that to compute
the output of the decision.

92
00:07:26.570 --> 00:07:32.860 
Actually we can detail that in the next
slide a bit more. So for that again

93
00:07:33.020 --> 00:07:37.250 
rule three and four are matched
which have different outputs.

94
00:07:37.620 --> 00:07:42.420 
So but that's perfectly fine that it's
completely allowed in the priority hit policy.

95
00:07:43.050 --> 00:07:49.050 
But the hit policy makes sure that
only the output medium is returned

96
00:07:49.780 --> 00:07:54.210 
and that is due to the ordering of
the elements in the output domain.

97
00:07:54.440 --> 00:07:56.970 
So we have matches for
rules three and four.

98
00:07:57.460 --> 00:08:00.950 
So high and medium are let's
say candidate outputs

99
00:08:01.630 --> 00:08:05.780 
and we use this information that
we see here low medium high

100
00:08:05.780 --> 00:08:10.080 
and we see that medium occurs before
high and therefore the output

101
00:08:10.360 --> 00:08:12.020 
of that decision
is medium.

102
00:08:14.920 --> 00:08:18.900 
So its on the on the one hand
its a clear representation

103
00:08:18.900 --> 00:08:23.360 
and its own very clear rule to
determine even with many matches

104
00:08:23.620 --> 00:08:27.290 
I can determine let's say the output
is always one output because

105
00:08:27.290 --> 00:08:32.230 
the ordering of the output domain is
very clear and is very precise.

106
00:08:32.720 --> 00:08:36.500 
On the other hand I think also
feel that the semantic is

107
00:08:36.500 --> 00:08:39.820 
not very intuitive, it's not
very clear when looking at the

108
00:08:39.820 --> 00:08:43.340 
tables, so you cannot really see
immediately by looking at the

109
00:08:43.340 --> 00:08:46.360 
table what's the outcome. We first
have to study the ordering

110
00:08:46.360 --> 00:08:50.490 
of the output domain which
is another level that

111
00:08:50.500 --> 00:08:54.820 
we need to go through here. So
the priority hit policy in

112
00:08:54.820 --> 00:08:59.710 
general should be avoided because of
its not very intuitive semantics.

113
00:09:02.810 --> 00:09:05.930 
Coming to the single hit policy
first and that's actually the

114
00:09:05.940 --> 00:09:10.680 
hit policy that we have used
in our a bike theft example

115
00:09:11.430 --> 00:09:16.190 
it can be regarded as a variant
of the priority single

116
00:09:16.190 --> 00:09:19.520 
hit policy in which rules
are processed in order

117
00:09:20.160 --> 00:09:23.740 
and the first rule that matches
determines the output. So also

118
00:09:23.740 --> 00:09:29.670 
many many rules can match but I walk
through the decision table row by row,

119
00:09:29.990 --> 00:09:37.760 
I evaluate each row and the first
row that matches gives the output.

120
00:09:39.170 --> 00:09:42.580 
Ok so here we have another
example and we'll

121
00:09:43.080 --> 00:09:47.160 
look at the input
combination four

122
00:09:47.160 --> 00:09:48.620 
hundred fifty
eighteen silver

123
00:09:49.300 --> 00:09:53.620 
that is the bike value
is four hundred fifty.

124
00:09:54.420 --> 00:10:00.120 
It was stolen at eighteen hours and the
customer contract type is silver.

125
00:10:01.170 --> 00:10:05.390 
And looking in detail at the
decision table here we see that

126
00:10:05.400 --> 00:10:08.070 
that combination
matches rule three

127
00:10:09.340 --> 00:10:13.530 
because it's in that
value interval

128
00:10:14.090 --> 00:10:18.590 
it is also in the interval of
the theft time and of course

129
00:10:18.590 --> 00:10:22.060 
it's a silver customer so
it matches rule three

130
00:10:22.520 --> 00:10:25.590 
and it also matches rule
seven because rule seven is

131
00:10:25.590 --> 00:10:30.970 
somehow the default, the else
part if you want where

132
00:10:31.000 --> 00:10:34.970 
the input does not play roles
so we'll always have the no.

133
00:10:36.310 --> 00:10:41.820 
And well which rule fires which
rule is selected to provide

134
00:10:41.820 --> 00:10:44.880 
the output it's rule number three
because it's the first one

135
00:10:44.880 --> 00:10:49.330 
that hits, our first hit policy
make sure that rule three

136
00:10:49.330 --> 00:10:54.510 
hits and the yes output is provided
for that input combination.

137
00:10:56.740 --> 00:11:00.490 
In general the first hit policy
should be used in cases where

138
00:11:00.560 --> 00:11:04.590 
if then else logic is appropriate
so when you know the if then

139
00:11:04.590 --> 00:11:07.460 
else construct from
programming for instance

140
00:11:07.900 --> 00:11:11.780 
we'll have something very similar
here. So we say if the first

141
00:11:12.150 --> 00:11:17.150 
row matches then take the output
else if the second row matches

142
00:11:17.160 --> 00:11:22.010 
take the output of row two else
if and so forth. And the else

143
00:11:22.270 --> 00:11:25.150 
part final else part
in this example

144
00:11:25.630 --> 00:11:28.470 
row seven which
is the default.

145
00:11:31.270 --> 00:11:35.420 
We have in a recent research
contribution we have shown

146
00:11:35.420 --> 00:11:39.970 
that we can transform any decision
table to a decision table

147
00:11:39.970 --> 00:11:44.070 
that has the unique
single hit policy.

148
00:11:44.630 --> 00:11:47.930 
However the resulting
table is a bit longer

149
00:11:48.670 --> 00:11:53.360 
than the original one and
we did this exercise for

150
00:11:54.070 --> 00:11:59.040 
for the bike theft example where you see the
table has the same structure than before

151
00:11:59.850 --> 00:12:03.920 
but the table has as in the first
hit policy but it has here

152
00:12:03.920 --> 00:12:09.050 
the U for unique it policy and we
also see that we need additional

153
00:12:09.840 --> 00:12:14.460 
additional rows here. For instance
the row number four is added

154
00:12:14.460 --> 00:12:19.510 
because we have to say that we need
explicit rows for representing

155
00:12:19.770 --> 00:12:23.690 
when a certain theft
cannot be covered.

156
00:12:24.370 --> 00:12:28.340 
Yeah so so far was enough to say
that for a silver customer

157
00:12:28.820 --> 00:12:32.420 
between two hundred one and five
hundred euros between six

158
00:12:32.420 --> 00:12:36.910 
and twenty two hours yes and
now we need to say well

159
00:12:36.910 --> 00:12:44.110 
if it's not the case if the
bike was stolen between six

160
00:12:44.710 --> 00:12:48.910 
between twenty two hours in the
evening and six in the morning

161
00:12:48.970 --> 00:12:52.910 
for a silver customer then actually
the theft cannot be covered.

162
00:12:53.190 --> 00:12:57.920 
So we cannot have this
last default row but and

163
00:12:57.920 --> 00:13:01.220 
we have to embed for each matching
row we also have to say

164
00:13:01.220 --> 00:13:06.220 
when it does not match to provide the
unique single hit policy feature.

165
00:13:07.790 --> 00:13:11.270 
So further information on that
can also be found in the

166
00:13:11.280 --> 00:13:14.380 
the additional reading material
if you are interested in that.

167
00:13:16.550 --> 00:13:21.610 
So that concludes the part of the
single hit policies where well

168
00:13:21.940 --> 00:13:27.210 
each input combination leads
to exactly one output.

169
00:13:28.070 --> 00:13:33.520 
We can also have multi hit policies. In
multi hit policies there are several

170
00:13:33.650 --> 00:13:36.800 
matching rules can be
used for determining

171
00:13:37.270 --> 00:13:38.720 
the output of
the decision.

172
00:13:39.660 --> 00:13:43.640 
The first multi-hit policy is
called output order or O.

173
00:13:44.940 --> 00:13:51.840 
So in output order the
decision returns all hits in

174
00:13:51.900 --> 00:13:54.930 
decreasing output
order priority.

175
00:13:55.690 --> 00:14:01.560 
So again here the priority
of the output domain

176
00:14:01.560 --> 00:14:06.820 
is used to determine the order in which
in which the output is provided.

177
00:14:07.540 --> 00:14:11.210 
Output priorities are specified
in the ordered list of output

178
00:14:11.210 --> 00:14:14.220 
values in decreasing
order of priority.

179
00:14:16.450 --> 00:14:19.670 
So we have an example here
and that is an example

180
00:14:19.810 --> 00:14:21.320 
based on this
decision table.

181
00:14:21.990 --> 00:14:26.540 
We decide on leave days so we
decide on a number of annual

182
00:14:27.010 --> 00:14:34.420 
leave days for our employees. Here we say
its an output order multi hit policy

183
00:14:34.600 --> 00:14:39.470 
and we use the age, the years of
service to determine the leave days

184
00:14:40.590 --> 00:14:44.450 
and all of them are numbers,
so the domain of all of them

185
00:14:44.450 --> 00:14:47.200 
are numbers and this
table reads as follows.

186
00:14:47.810 --> 00:14:53.340 
So row one says that regardless
of the age and of the number

187
00:14:53.340 --> 00:14:57.540 
of service everybody gets twenty
six days of annual leave.

188
00:14:59.450 --> 00:15:03.200 
If you are older than thirty
regardless of the number of years

189
00:15:03.200 --> 00:15:06.890 
in service you will get two
more days of annual leave.

190
00:15:07.780 --> 00:15:12.120 
If you are older than sixty you
will get an additional three days

191
00:15:12.900 --> 00:15:17.330 
and similar considerations apply
for the years of service so

192
00:15:17.720 --> 00:15:21.000 
when you are in the company worked
for the company longer than

193
00:15:21.000 --> 00:15:24.080 
ten years you get two more days,
longer than twenty years three

194
00:15:24.080 --> 00:15:28.070 
more days, longer than thirty years
four more days of annual leave.

195
00:15:29.420 --> 00:15:33.760 
So let's make a concrete
example here so we have an

196
00:15:33.760 --> 00:15:37.580 
input combination fifty thirty
one that is age fifty working

197
00:15:37.580 --> 00:15:42.530 
thirty-one years for that company. And
he would say that the rules one, two,

198
00:15:42.700 --> 00:15:46.290 
four, five, six actually fire.
So let's see why that is the

199
00:15:46.290 --> 00:15:50.240 
case. Well rule one fires
always so we don't

200
00:15:50.240 --> 00:15:55.380 
need to check that. Rule two fires
because the person is fifty

201
00:15:55.380 --> 00:15:57.820 
years old and therefore
three does not fire.

202
00:15:58.330 --> 00:16:00.170 
And he is around for

203
00:16:00.860 --> 00:16:04.060 
more than thirty years so also
these three rules fire.

204
00:16:04.850 --> 00:16:09.130 
And what is the output now?
Well the output is a list of

205
00:16:09.140 --> 00:16:13.770 
values consisting of the outputs
of rules one, two, four, five,

206
00:16:13.770 --> 00:16:19.580 
six and the order is
determined by the output

207
00:16:19.590 --> 00:16:22.150 
ordering of the values
so the output domain.

208
00:16:22.570 --> 00:16:28.120 
And that's here two, two, three,
four and twenty six. That depends

209
00:16:28.190 --> 00:16:31.750 
and that applies that the priority
of all smaller number is larger

210
00:16:31.750 --> 00:16:33.230 
than the priority of
a large number.

211
00:16:36.330 --> 00:16:40.280 
The second multi hit policy
is called rule order.

212
00:16:41.290 --> 00:16:45.870 
That's very similar to the one
we have seen before, however

213
00:16:45.870 --> 00:16:50.080 
the output of all matching rules
are returned as a sorted

214
00:16:50.080 --> 00:16:53.650 
list in the order of the rules.
So its not the order of the

215
00:16:53.650 --> 00:16:56.670 
output values but is the
order of the rules.

216
00:16:57.610 --> 00:16:59.970 
So for the same example

217
00:17:00.760 --> 00:17:03.520 
and we have of course the
same rules matching

218
00:17:04.460 --> 00:17:09.840 
and we have here the rule order
leads to the output twenty six

219
00:17:10.140 --> 00:17:14.410 
because it's the first rule
that matches and we have two,

220
00:17:14.890 --> 00:17:17.760 
rule three does not match and
then we have two, three, four.

221
00:17:18.420 --> 00:17:21.800 
That is the output and
you see that the

222
00:17:22.390 --> 00:17:27.360 
that the multi-hit policy
specifies actually the semantics

223
00:17:27.360 --> 00:17:31.020 
of the decision table. So given one
decision table with different

224
00:17:31.020 --> 00:17:35.310 
multi hit policies we have different outcome
so we have different semantics of that

225
00:17:35.490 --> 00:17:35.920 
table.

226
00:17:38.930 --> 00:17:42.250 
So finally we come to the
collect multi hit policy.

227
00:17:43.280 --> 00:17:46.830 
Here the outputs of all matching
rules are either returned

228
00:17:46.830 --> 00:17:50.990 
as an unsorted list, so there's no
sorting in the elements or and

229
00:17:50.990 --> 00:17:55.450 
that is done and that is done typically
actually with collect hit policy.

230
00:17:56.190 --> 00:18:01.440 
The matching the outputs are
aggregated. So an aggregation

231
00:18:01.440 --> 00:18:04.660 
can be applied to the aggregation
can be the sum of values,

232
00:18:04.660 --> 00:18:07.880 
that can be the minimal that
can be the maximum and it can

233
00:18:07.880 --> 00:18:10.320 
be the number the
number of outputs.

234
00:18:11.560 --> 00:18:16.280 
So again looking here and
in that example that

235
00:18:16.290 --> 00:18:20.470 
we seen before, so to decide
on the leave days with a

236
00:18:20.500 --> 00:18:26.070 
multi-hit policies C+ that is
collect some aggregation, that

237
00:18:26.180 --> 00:18:29.360 
is represented
here by the C+

238
00:18:30.180 --> 00:18:36.090 
and then what happens here is
actually we can summarize

239
00:18:36.100 --> 00:18:41.310 
the output of the matching rows. So
we summarize the value twenty six

240
00:18:42.360 --> 00:18:49.310 
two, two, three, four and that brings
us to the output thirty seven days.

241
00:18:50.000 --> 00:18:55.380 
So an employee aged fifty with
a thirty year and thirty one

242
00:18:55.380 --> 00:19:00.190 
years of service gets thirty seven
days of annual leave. So that is a

243
00:19:00.610 --> 00:19:04.840 
that is the way that is probably
the most intuitive way

244
00:19:04.850 --> 00:19:05.910 
for that example.

245
00:19:09.030 --> 00:19:13.240 
This brings us to the end of video
clip five in which we discuss

246
00:19:13.240 --> 00:19:15.170 
the semantics of
decision tables.

247
00:19:15.860 --> 00:19:22.350 
Basically we introduced hit policy, so the
four single hit policies - unique, any,

248
00:19:22.480 --> 00:19:28.250 
priority and first. And also three
multi-hit policies output order,

249
00:19:28.260 --> 00:19:32.460 
rule order and collect with
different with the different

250
00:19:32.460 --> 00:19:36.050 
aggregation operation that we
can associate to collect.
