WEBVTT

00:00:18.675 --> 00:00:20.050
YUFEI ZHAO: We're
about to embark

00:00:20.050 --> 00:00:22.900
on a new chapter in
this course where

00:00:22.900 --> 00:00:25.520
I want to tell you about
Szemeredi's graph regularity

00:00:25.520 --> 00:00:26.020
lemma.

00:00:46.820 --> 00:00:48.730
Szemeredi's graph
regularity lemma

00:00:48.730 --> 00:00:52.400
is a very powerful tool in
modern graph theory, developed

00:00:52.400 --> 00:00:54.440
back in the '70s.

00:00:54.440 --> 00:00:58.310
Today I want to show you
the statement and the proof

00:00:58.310 --> 00:01:00.410
of this graph regularity lemma.

00:01:00.410 --> 00:01:05.120
And next time, we'll see how
to apply the lemma for graph

00:01:05.120 --> 00:01:06.700
theoretic applications.

00:01:06.700 --> 00:01:09.050
And we'll also use it to give
a proof of Roth's theorem.

00:01:11.850 --> 00:01:14.940
The idea of Szemeredi's
regularity lemma

00:01:14.940 --> 00:01:24.460
is that if you are given
a very large graph, G.

00:01:24.460 --> 00:01:28.090
And it's a fairly
robust theorem, so

00:01:28.090 --> 00:01:33.370
any large, dense graph.

00:01:33.370 --> 00:01:38.640
And here, "dense" means,
let's say, positive x density.

00:01:38.640 --> 00:01:50.050
Then it is possible to partition
the vertex set of this graph G

00:01:50.050 --> 00:02:10.710
into a bounded number of pieces
So that G looks random-like

00:02:10.710 --> 00:02:13.020
between most pairs of parts.

00:02:22.050 --> 00:02:24.930
So for instance, I
might produce for you

00:02:24.930 --> 00:02:29.840
a partition of the vertex set
into some number of parts.

00:02:29.840 --> 00:02:32.430
I'll draw five here.

00:02:32.430 --> 00:02:34.550
So you give me a
graph G. I manage

00:02:34.550 --> 00:02:37.690
to produce for you
this vertex partition

00:02:37.690 --> 00:02:42.130
so that if I look at between
a typical pair of parts,

00:02:42.130 --> 00:02:46.870
you see here maybe the edge
density is close to 0.2

00:02:46.870 --> 00:02:50.320
but otherwise, the
bipartite graph looks

00:02:50.320 --> 00:02:53.580
like a random graph in some
precise sense I will describe

00:02:53.580 --> 00:02:55.060
in a bit.

00:02:55.060 --> 00:02:57.150
And if you look at
what the graph looks

00:02:57.150 --> 00:02:59.610
like between another
pair of parts,

00:02:59.610 --> 00:03:01.770
maybe now it's a
different x density.

00:03:01.770 --> 00:03:04.040
Maybe it's around 0.4.

00:03:04.040 --> 00:03:08.890
And again, looks like a random
graph with that density.

00:03:08.890 --> 00:03:11.700
So in some sense,
Szemeredi's regularity lemma

00:03:11.700 --> 00:03:14.760
is a universal
structural description

00:03:14.760 --> 00:03:19.890
that allows you to approximate
a graph by a bounded amount

00:03:19.890 --> 00:03:22.620
of information.

00:03:22.620 --> 00:03:24.300
So that's informally the idea.

00:03:24.300 --> 00:03:25.980
And you can already
sense that this

00:03:25.980 --> 00:03:27.810
can be a very powerful tool.

00:03:27.810 --> 00:03:30.780
It doesn't matter
what graph you input.

00:03:30.780 --> 00:03:36.630
You apply this lemma, and you
get an approximate structural

00:03:36.630 --> 00:03:39.390
or as later on we'll see,
it's also, in some sense,

00:03:39.390 --> 00:03:41.310
an analytic description
of the graph.

00:03:43.840 --> 00:03:48.430
So the first part
of today's lecture

00:03:48.430 --> 00:03:52.210
will develop just a statement
of this regularity lemma.

00:03:52.210 --> 00:03:58.030
I'll show you what exactly
do I mean by "random-like."

00:03:58.030 --> 00:04:03.294
Well, first let me
give some definitions.

00:04:03.294 --> 00:04:06.350
I denote by the
letter e if I input

00:04:06.350 --> 00:04:10.750
a pair of vertex sets, x and y.

00:04:13.900 --> 00:04:20.050
Here I might, later on,
draw the subscript G

00:04:20.050 --> 00:04:23.530
if it's clear that I'm always
talking about some graph

00:04:23.530 --> 00:04:27.220
G. So this is
basically the number

00:04:27.220 --> 00:04:30.460
of edges between x and y.

00:04:41.710 --> 00:04:44.090
And I say "basically"
because even though I

00:04:44.090 --> 00:04:47.720
will draw and depict everything
as if x and y are disjoint

00:04:47.720 --> 00:04:51.320
sets, and that's the
easiest case to think about,

00:04:51.320 --> 00:04:54.470
I'm also going to allow
x and y to overlap,

00:04:54.470 --> 00:04:57.620
and also allow x and y to be
the same set, in which case

00:04:57.620 --> 00:05:01.270
you should read a definition
as to what this means.

00:05:01.270 --> 00:05:03.860
But it's fine to think
of it as disjoint sets.

00:05:03.860 --> 00:05:07.760
So you're looking at a
bipartite graph between x and y.

00:05:07.760 --> 00:05:13.100
We're also going to look at the
edge density between x and y.

00:05:13.100 --> 00:05:17.300
And this is simply the
number of edges divided

00:05:17.300 --> 00:05:23.570
by the product of the
sizes of the sets,

00:05:23.570 --> 00:05:28.250
so what fraction of the
possible pairs are actual edges.

00:05:28.250 --> 00:05:30.440
So from now on, I'll
refer to this quantity

00:05:30.440 --> 00:05:31.720
as "edge density."

00:05:36.840 --> 00:05:41.370
So now, here's the definition
of what "random-like"

00:05:41.370 --> 00:05:44.480
means for the purpose of
Szemeredi's regularity lemma.

00:05:44.480 --> 00:05:50.880
So we define a notion of
an epsilon regular pair

00:05:50.880 --> 00:05:52.140
to be as follows--

00:05:52.140 --> 00:05:55.950
throughout, and later on, I
will omit even saying this--

00:05:55.950 --> 00:05:59.340
G will be some graph.

00:05:59.340 --> 00:06:05.220
And we're going to be looking
at subsets of vertices of G.

00:06:05.220 --> 00:06:10.290
And we say that this pair
of subsets of vertices

00:06:10.290 --> 00:06:18.250
is epsilon regular,
again, in G, but later

00:06:18.250 --> 00:06:20.560
on I will even drop
saying in G if it's clear

00:06:20.560 --> 00:06:22.710
which graph we're working with.

00:06:22.710 --> 00:06:25.540
So we say x and y
is epsilon regular

00:06:25.540 --> 00:06:36.360
if for all subsets A of X, all
B subsets of Y that are not

00:06:36.360 --> 00:06:48.720
too small, so each at least an
epsilon proportion of the sets

00:06:48.720 --> 00:06:55.470
that they live in, we find that
the x density between A and B

00:06:55.470 --> 00:06:59.160
differs from the x
density between X and X

00:06:59.160 --> 00:07:03.010
by no more than epsilon.

00:07:03.010 --> 00:07:06.040
Let me draw you a picture.

00:07:06.040 --> 00:07:13.780
I have sets A and B. So I have
sets X and Y in my graph G.

00:07:13.780 --> 00:07:21.000
And I want to say that the edges
between X and Y are epsilon

00:07:21.000 --> 00:07:25.770
regular, so it's random-like,
if the following holds--

00:07:25.770 --> 00:07:31.700
that whenever I pick a
subset A in the left set

00:07:31.700 --> 00:07:38.640
and a subset B of the
right set, the edge density

00:07:38.640 --> 00:07:44.130
between A and B is approximately
the same as the overall edge

00:07:44.130 --> 00:07:47.080
density between X and Y.

00:07:47.080 --> 00:07:51.100
So in particular, this
bipartite graph, for instance,

00:07:51.100 --> 00:07:54.290
is not really dense in
one part and really sparse

00:07:54.290 --> 00:07:55.150
in another part.

00:07:55.150 --> 00:07:58.390
Somehow the edges are
evenly distributed

00:07:58.390 --> 00:08:00.810
in this precise manner.

00:08:00.810 --> 00:08:02.890
So that's the definition
of epsilon regular.

00:08:02.890 --> 00:08:04.002
Yes, question.

00:08:04.002 --> 00:08:08.260
AUDIENCE: What is the epsilon
for the size of A the same as

00:08:08.260 --> 00:08:11.345
epsilon for [INAUDIBLE]?

00:08:11.345 --> 00:08:12.720
YUFEI ZHAO: The
question is here,

00:08:12.720 --> 00:08:15.763
why are we using the same
epsilon here, here, and there?

00:08:15.763 --> 00:08:16.930
And that's a great question.

00:08:16.930 --> 00:08:19.070
So that's mostly
out of convenience.

00:08:19.070 --> 00:08:21.780
So you could use
different parameters.

00:08:21.780 --> 00:08:24.120
And they do play
somewhat different roles,

00:08:24.120 --> 00:08:27.510
but at the end, we'll
generally be looking

00:08:27.510 --> 00:08:29.740
at one type of epsilons.

00:08:29.740 --> 00:08:31.390
So we just make our life easier.

00:08:31.390 --> 00:08:33.539
So you could extend
the definition

00:08:33.539 --> 00:08:37.600
by having an epsilon
comma eta, if you like,

00:08:37.600 --> 00:08:40.020
but it will not be
necessary for us, and mostly

00:08:40.020 --> 00:08:41.780
for simplification.

00:08:41.780 --> 00:08:43.144
Any more questions?

00:08:46.539 --> 00:08:47.509
All right.

00:08:51.890 --> 00:08:58.670
Now if you have a pair x, y
that is not epsilon regular,

00:08:58.670 --> 00:09:00.690
I just want to introduce
a piece of terminology.

00:09:00.690 --> 00:09:02.732
So you can read from the
definition what it means

00:09:02.732 --> 00:09:04.160
to be not epsilon regular.

00:09:04.160 --> 00:09:06.370
And sometimes I will
say "epsilon irregular,"

00:09:06.370 --> 00:09:11.600
but to be precise, I'll stick
with not epsilon regular.

00:09:16.680 --> 00:09:20.910
Then we can exhibit this
A and B that witnesses

00:09:20.910 --> 00:09:23.080
the irregularity.

00:09:23.080 --> 00:09:29.700
So if x, y is not
epsilon regular, then

00:09:29.700 --> 00:09:45.980
their irregularity as, we say
it's "witnessed by" some pair

00:09:45.980 --> 00:09:52.380
A in X and B in Y, satisfying--

00:09:52.380 --> 00:09:57.760
basically, you read
the definition,

00:09:57.760 --> 00:10:01.200
and such that the
density between A and B

00:10:01.200 --> 00:10:06.150
differs quite a bit from
the density between X and Y.

00:10:06.150 --> 00:10:09.450
So when I say "to exhibit"
or "to witness irregularity,"

00:10:09.450 --> 00:10:11.640
that's what I mean.

00:10:11.640 --> 00:10:13.690
Now, there's a bit of an
unfortunate nomenclature

00:10:13.690 --> 00:10:15.880
in graph theory,
where previously, we

00:10:15.880 --> 00:10:19.960
said "irregular graphs" to mean
that every vertex is degree D.

00:10:19.960 --> 00:10:23.710
And now we say "epsilon
regular" to mean this.

00:10:23.710 --> 00:10:24.460
Sorry about that.

00:10:24.460 --> 00:10:27.070
These are both standard,
so usually from context,

00:10:27.070 --> 00:10:28.900
it's clear which one is meant.

00:10:34.170 --> 00:10:37.050
So this is what it means for
a single pair of vertex sets

00:10:37.050 --> 00:10:38.670
to be epsilon regular.

00:10:38.670 --> 00:10:40.680
But now I give you a graph.

00:10:40.680 --> 00:10:44.110
And I give you a partition
of the vertex set.

00:10:44.110 --> 00:10:45.900
So what does it mean
for that partition

00:10:45.900 --> 00:10:47.955
to be epsilon regular?

00:10:47.955 --> 00:10:49.818
And here's the
second definition.

00:10:53.940 --> 00:11:05.980
So an epsilon regular partition,
we say that a partition--

00:11:05.980 --> 00:11:08.120
and generally, I
will denote partition

00:11:08.120 --> 00:11:12.860
by curly letters such as
that, P. So the partition

00:11:12.860 --> 00:11:23.030
will divide a vertex set
into a bunch of subsets.

00:11:23.030 --> 00:11:30.880
So we say that that
partition is epsilon regular

00:11:30.880 --> 00:11:33.430
if the following is true--

00:11:33.430 --> 00:11:45.590
if I sum over all
pairs of irregular

00:11:45.590 --> 00:11:55.100
or pairs of vertex sets that
are not epsilon regular,

00:11:55.100 --> 00:11:59.370
so over Vi, Vj not
epsilon regular, and sum

00:11:59.370 --> 00:12:07.020
over the product of their
sizes, then what I would like

00:12:07.020 --> 00:12:12.540
is for the sum to be
at most epsilon times

00:12:12.540 --> 00:12:18.320
the number of pairs of
vertices in G. In other words,

00:12:18.320 --> 00:12:22.060
a small fraction of
pairs of vertices,

00:12:22.060 --> 00:12:24.790
not necessarily edges, but
just pairs of vertices,

00:12:24.790 --> 00:12:30.050
lie between pairs
of vertex parts

00:12:30.050 --> 00:12:33.060
that are not epsilon regular.

00:12:33.060 --> 00:12:37.350
So for instance, if you
do not have epsilon--

00:12:37.350 --> 00:12:39.360
if all of your pairs
are epsilon regular,

00:12:39.360 --> 00:12:41.850
then the partition
is epsilon regular.

00:12:41.850 --> 00:12:46.610
But I do allow a small
number of blemishes.

00:12:46.610 --> 00:12:48.003
And that will be necessary.

00:12:53.680 --> 00:12:56.340
Just to clarify a
subtle point here,

00:12:56.340 --> 00:13:03.310
here I do allow in the
summation i equals to j,

00:13:03.310 --> 00:13:05.990
although in practice it
doesn't really matter.

00:13:05.990 --> 00:13:08.690
You'll see that it's not really
going to come up as an issue.

00:13:14.680 --> 00:13:16.430
And one of the
reasons that it's not

00:13:16.430 --> 00:13:19.280
going to come up as
an issue is usually

00:13:19.280 --> 00:13:22.220
when we apply this lemma, we're
going to have a lot of parts.

00:13:22.220 --> 00:13:24.330
In fact, we can
make sure that there

00:13:24.330 --> 00:13:26.700
is a minimum number of parts.

00:13:26.700 --> 00:13:34.010
And if none of the parts are too
big, then having i equals to j

00:13:34.010 --> 00:13:36.030
contributes very little
to that sum anyway.

00:13:41.410 --> 00:13:49.530
In particular, if
all the set sizes

00:13:49.530 --> 00:13:51.870
in this partition are
roughly the same--

00:13:55.730 --> 00:14:01.950
so if they're all roughly 1 over
k fraction of the entire vertex

00:14:01.950 --> 00:14:02.970
set--

00:14:02.970 --> 00:14:13.410
then that statement up there
being epsilon regular partition

00:14:13.410 --> 00:14:16.500
up to changing this epsilon
is basically the same

00:14:16.500 --> 00:14:23.030
as saying that fewer than
epsilon fraction of the pairs

00:14:23.030 --> 00:14:29.670
Vi, Vj are not epsilon regular.

00:14:29.670 --> 00:14:32.840
And here, if k is
large enough, I

00:14:32.840 --> 00:14:35.910
can even let you make
i and j different.

00:14:35.910 --> 00:14:39.110
It's not going to affect things
after small changes in epsilon.

00:14:42.450 --> 00:14:45.140
So when it comes to-- so
for people who are seeing

00:14:45.140 --> 00:14:48.040
Szemeredi's regularity
lemma for the first time--

00:14:48.040 --> 00:14:51.370
I think that's maybe all
of you, or most of you--

00:14:51.370 --> 00:14:54.820
I don't want you to focus
on the precise statements

00:14:54.820 --> 00:14:56.710
so much as the
spirit of the lemma.

00:14:56.710 --> 00:14:59.220
Because if you get
too nitty gritty with

00:14:59.220 --> 00:15:02.350
is that the same as that
epsilon, you get very confused

00:15:02.350 --> 00:15:03.860
very quickly.

00:15:03.860 --> 00:15:06.820
So I want you to focus on
the spirit of this lemma.

00:15:06.820 --> 00:15:09.190
I will state
everything precisely,

00:15:09.190 --> 00:15:13.588
but the idea is that most
pairs are not epsilon regular.

00:15:13.588 --> 00:15:15.630
And don't worry too much
about if you are allowed

00:15:15.630 --> 00:15:17.110
to take i equals to j or not.

00:15:19.960 --> 00:15:22.490
So now we're ready to state
Szemeredi's regularity lemma.

00:15:38.450 --> 00:15:42.530
And it says that
for every epsilon,

00:15:42.530 --> 00:15:50.170
there exists some constant M
depending only on epsilon such

00:15:50.170 --> 00:16:05.520
that every graph has an
epsilon regular partition

00:16:05.520 --> 00:16:09.140
into at most M parts.

00:16:14.330 --> 00:16:17.390
You give me the
epsilon, for example 1%,

00:16:17.390 --> 00:16:20.240
and there exists
some constant such

00:16:20.240 --> 00:16:25.280
that every graph has
a 1% regular partition

00:16:25.280 --> 00:16:28.838
into a bounded number of parts.

00:16:28.838 --> 00:16:30.630
In particular-- and
this is very important,

00:16:30.630 --> 00:16:32.130
make sure you
understand this part--

00:16:32.130 --> 00:16:35.840
that the number of
parts does not depend

00:16:35.840 --> 00:16:36.890
on the size of the graph.

00:16:48.200 --> 00:16:50.700
Now, it's true that
for some graphs, maybe

00:16:50.700 --> 00:16:53.600
you do need very many parts.

00:16:53.600 --> 00:16:58.190
But the number of parts does
not get substantially bigger,

00:16:58.190 --> 00:17:02.480
or does not exceed this bound,
even if you look at graphs

00:17:02.480 --> 00:17:04.630
that have unbounded size.

00:17:04.630 --> 00:17:07.310
So it is really a universal
theorem in the sense

00:17:07.310 --> 00:17:10.290
that it's independent of
the size of the graph.

00:17:13.839 --> 00:17:16.200
Any questions about the
statement of this theorem?

00:17:16.200 --> 00:17:16.876
Yes.

00:17:16.876 --> 00:17:19.209
AUDIENCE: So in the informal
statement at the beginning,

00:17:19.209 --> 00:17:20.759
you said G was a
large, dense graph.

00:17:20.759 --> 00:17:21.801
YUFEI ZHAO: That's right.

00:17:21.801 --> 00:17:23.859
AUDIENCE: Is the dense condition
appropriate anywhere in here?

00:17:23.859 --> 00:17:26.220
YUFEI ZHAO: So the
question is, why did I say

00:17:26.220 --> 00:17:29.220
that G is a large, dense graph?

00:17:29.220 --> 00:17:30.900
And that's a great question.

00:17:30.900 --> 00:17:35.370
And that's because if G had
a sub-linear number of edges,

00:17:35.370 --> 00:17:39.270
then I claim that all--

00:17:39.270 --> 00:17:46.090
if you look at the definition
of epsilon regular pair,

00:17:46.090 --> 00:17:52.180
and your epsilon is a constant,
and if your edge densities

00:17:52.180 --> 00:17:54.250
are sub-linear, then
all of these guys,

00:17:54.250 --> 00:17:56.170
they are little o of 1.

00:17:56.170 --> 00:17:57.520
They go to 0.

00:17:57.520 --> 00:18:03.170
So trivially, you will satisfy
the epsilon regular condition.

00:18:03.170 --> 00:18:04.940
So if your graph is sparse--

00:18:04.940 --> 00:18:09.410
sparse in the sense of having
sub-quadratic number of edges--

00:18:09.410 --> 00:18:15.070
then you trivially obtain
epsilon regularity.

00:18:15.070 --> 00:18:17.620
And so the theorem
is still true.

00:18:17.620 --> 00:18:19.000
It's just not meaningful.

00:18:19.000 --> 00:18:20.050
It's just not useful.

00:18:20.050 --> 00:18:22.720
But there are settings
where having sparse graphs--

00:18:22.720 --> 00:18:25.410
and we'll come back to
this later in the course--

00:18:25.410 --> 00:18:27.757
it's important to explore
what happens to sparse graphs.

00:18:27.757 --> 00:18:28.257
Yeah.

00:18:28.257 --> 00:18:31.670
AUDIENCE: So that M
is independent of G.

00:18:31.670 --> 00:18:35.030
YUFEI ZHAO: Yes, M is
independent of G. M depends

00:18:35.030 --> 00:18:35.900
only on epsilon.

00:18:39.108 --> 00:18:41.566
AUDIENCE: M is really large,
but there's no enough vertices

00:18:41.566 --> 00:18:42.290
in the graph.

00:18:42.290 --> 00:18:42.990
YUFEI ZHAO: OK,
question is, what

00:18:42.990 --> 00:18:44.948
happens when M is very
large, but there are not

00:18:44.948 --> 00:18:47.170
enough vertices in the graph?

00:18:47.170 --> 00:18:50.620
Well, if your M is a
million, and your graph only

00:18:50.620 --> 00:18:52.690
has 1,000 vertices,
what you can do

00:18:52.690 --> 00:18:54.610
is have every vertex
be its own part.

00:18:58.730 --> 00:19:02.060
Every vertex is its own
part, a singleton partition.

00:19:02.060 --> 00:19:05.240
And you can check that
that partition satisfies

00:19:05.240 --> 00:19:06.980
the properties.

00:19:06.980 --> 00:19:12.152
Every pair is a single edge
and it's epsilon regular.

00:19:12.152 --> 00:19:13.090
Yeah.

00:19:13.090 --> 00:19:15.163
AUDIENCE: So in the
definition, is it

00:19:15.163 --> 00:19:16.330
sort of like all or nothing?

00:19:16.330 --> 00:19:18.788
You can either [INAUDIBLE]
epsilon regularity [INAUDIBLE]..

00:19:18.788 --> 00:19:21.110
Do you get anything
where if you, like, say,

00:19:21.110 --> 00:19:24.838
make this more continuous,
so you allow for it to be--

00:19:24.838 --> 00:19:26.974
you quantify how irregular
it is, and then can

00:19:26.974 --> 00:19:28.790
you make [INAUDIBLE]?

00:19:28.790 --> 00:19:30.660
YUFEI ZHAO: OK, so
my understanding what

00:19:30.660 --> 00:19:33.360
you're asking is in the
definition up there,

00:19:33.360 --> 00:19:36.300
the sum is--

00:19:36.300 --> 00:19:39.360
we put the pair in the sum
of this epsilon regular,

00:19:39.360 --> 00:19:40.680
and otherwise don't put it.

00:19:40.680 --> 00:19:44.550
Is there some gradual way to
put some measure of irregularity

00:19:44.550 --> 00:19:45.450
into that sum?

00:19:45.450 --> 00:19:48.410
And there are versions of
regularity lemma that do that,

00:19:48.410 --> 00:19:51.030
but they are all,
in spirit, morally

00:19:51.030 --> 00:19:53.885
the same as that one there.

00:19:53.885 --> 00:19:54.385
Yeah.

00:19:54.385 --> 00:19:55.927
AUDIENCE: In the
informal definition,

00:19:55.927 --> 00:19:57.200
what does "random-like" mean?

00:19:57.200 --> 00:19:58.950
YUFEI ZHAO: So in the
informal definition,

00:19:58.950 --> 00:20:00.510
what does "random-like" mean?

00:20:00.510 --> 00:20:03.330
This is the formal definition
of what "random-like" means.

00:20:03.330 --> 00:20:06.240
So actually later on in the
course, one of the chapters

00:20:06.240 --> 00:20:09.390
will explore what
pseudo-random graphs are.

00:20:09.390 --> 00:20:10.980
So pseudo-random
graph, in some sense,

00:20:10.980 --> 00:20:12.480
means graphs that
are not random,

00:20:12.480 --> 00:20:15.030
but behave in some
sense like random.

00:20:15.030 --> 00:20:19.550
So "random-like" generally
just means that in some aspect,

00:20:19.550 --> 00:20:23.970
in some property, it looks
like a random object.

00:20:23.970 --> 00:20:27.830
And this is one way that
something can look like random.

00:20:27.830 --> 00:20:31.910
So a random graph
has this property,

00:20:31.910 --> 00:20:34.580
but random graphs also
have many other properties

00:20:34.580 --> 00:20:37.790
that are not being exhibited
in this definition.

00:20:37.790 --> 00:20:42.260
But this is one way that
graph can look like random.

00:20:42.260 --> 00:20:43.430
So that's a great question.

00:20:43.430 --> 00:20:45.680
And we'll come back to that
topic later in the course.

00:20:47.655 --> 00:20:49.030
All of these are
great questions.

00:20:49.030 --> 00:20:51.870
So Szemeredi's regularity lemma,
the first time you see it,

00:20:51.870 --> 00:20:54.310
it can look somewhat scary.

00:20:54.310 --> 00:20:55.910
But I want you to
try to understand

00:20:55.910 --> 00:20:56.900
it more conceptually.

00:20:56.900 --> 00:20:58.550
So please do ask questions.

00:21:05.900 --> 00:21:09.350
Before diving into the proof, I
want to make a few more remarks

00:21:09.350 --> 00:21:10.709
about a statement.

00:21:15.300 --> 00:21:18.130
It is possible to--

00:21:18.130 --> 00:21:21.840
we will prove this version
of the regularity lemma.

00:21:21.840 --> 00:21:25.930
But as I mentioned, it is the
spirit of the regularity lemma

00:21:25.930 --> 00:21:27.360
that I care more about.

00:21:27.360 --> 00:21:29.610
And it's a very
robust statement.

00:21:29.610 --> 00:21:32.697
You can add on extra
declarations that somehow

00:21:32.697 --> 00:21:33.780
doesn't change the spirit.

00:21:33.780 --> 00:21:35.613
And the proof will be
more or less the same,

00:21:35.613 --> 00:21:38.770
but for various applications
will be slightly more useful.

00:21:38.770 --> 00:21:41.300
So in particular, it
is possible to make

00:21:41.300 --> 00:21:43.329
the partition equitable.

00:21:56.060 --> 00:21:58.000
And "equitable
partition" sometimes

00:21:58.000 --> 00:22:04.540
is also called an
"equipartition," meaning

00:22:04.540 --> 00:22:09.490
that it has such that
all the Ai's, all

00:22:09.490 --> 00:22:13.240
the Bi's have sizes
differing by at most 1.

00:22:19.090 --> 00:22:22.910
So basically, all the parts have
the same size up to at most 1,

00:22:22.910 --> 00:22:25.700
because of divisibility.

00:22:25.700 --> 00:22:29.570
So let me state a version
of regularity lemma

00:22:29.570 --> 00:22:31.690
for equitable partitions.

00:22:31.690 --> 00:22:37.010
So for every epsilon
in m, little m0,

00:22:37.010 --> 00:22:48.560
there exists a big M
such that every graph

00:22:48.560 --> 00:23:05.250
has an epsilon regular equitable
partition of the vertex set

00:23:05.250 --> 00:23:13.440
into k parts, where k is
at least little m, so I can

00:23:13.440 --> 00:23:15.420
guarantee a minimum
number of parts,

00:23:15.420 --> 00:23:17.940
and at most some bounded number.

00:23:17.940 --> 00:23:24.750
Again this bound may depend
on your inputs epsilon and m0,

00:23:24.750 --> 00:23:28.740
but it does not depend
on the graph itself.

00:23:28.740 --> 00:23:30.950
And you see the slightly
stronger conclusion

00:23:30.950 --> 00:23:33.170
for many applications
is more convenient,

00:23:33.170 --> 00:23:37.120
to use this formulation.

00:23:37.120 --> 00:23:41.890
And I will comment on how you
may modify the proof that we'll

00:23:41.890 --> 00:23:46.820
see today into one where you
can guarantee equitability.

00:23:46.820 --> 00:23:57.750
And you see that for this
m, little m0 too small,

00:23:57.750 --> 00:24:02.040
for example, if it's somewhat
larger than 1 over epsilon,

00:24:02.040 --> 00:24:06.260
when you look at the definition
of epsilon regular partition,

00:24:06.260 --> 00:24:10.080
it suffices to check that
at most epsilon k squared,

00:24:10.080 --> 00:24:16.225
epsilon fraction of
the pairs, Vi, Vj

00:24:16.225 --> 00:24:20.710
is epsilon regular
over i different

00:24:20.710 --> 00:24:23.950
from j, again up to
changing epsilon,

00:24:23.950 --> 00:24:25.580
let's say, by a factor of 2.

00:24:25.580 --> 00:24:28.540
So all of these
definitions are basically

00:24:28.540 --> 00:24:30.940
the same up to small
changes in the parameters.

00:24:42.420 --> 00:24:45.080
Next time, we'll see how to
apply the regularity lemma.

00:24:45.080 --> 00:24:47.960
And we will apply it
in the first form,

00:24:47.960 --> 00:24:49.682
but you see the
second form guarantees

00:24:49.682 --> 00:24:51.140
you a somewhat
stronger conclusion,

00:24:51.140 --> 00:24:53.370
and sometimes more
convenient to use.

00:24:53.370 --> 00:24:55.430
So for example on the
homework problems,

00:24:55.430 --> 00:24:59.900
if you wish to use the second
form, then please go ahead.

00:24:59.900 --> 00:25:01.760
Just make your life
somewhat easier,

00:25:01.760 --> 00:25:04.040
but it essentially
captures all the spirit

00:25:04.040 --> 00:25:05.720
of Szemeredi's regularity.

00:25:09.815 --> 00:25:10.690
Any questions so far?

00:25:13.610 --> 00:25:17.600
I want to explain the idea of
the proof of the regularity

00:25:17.600 --> 00:25:19.220
lemma.

00:25:19.220 --> 00:25:21.980
And this is a very
important technique

00:25:21.980 --> 00:25:25.493
in this area called the
"energy increment argument."

00:25:35.850 --> 00:25:38.110
Here's the idea.

00:25:38.110 --> 00:25:43.710
We start with some
partition, so for example,

00:25:43.710 --> 00:25:46.250
the trivial partition--

00:25:46.250 --> 00:25:49.680
and by that I mean you
only have one part.

00:25:52.295 --> 00:25:53.670
All the vertices
are in one part.

00:25:53.670 --> 00:25:55.830
You're not doing anything
to the vertex set.

00:25:55.830 --> 00:25:58.770
It's one gigantic part.

00:25:58.770 --> 00:26:01.350
Or if you're looking
at some other variant,

00:26:01.350 --> 00:26:03.120
you can easily modify the proof.

00:26:03.120 --> 00:26:09.050
So for example, you can also
look at an arbitrary partition

00:26:09.050 --> 00:26:13.523
into little m0 parts,
if you wish to have

00:26:13.523 --> 00:26:14.690
that as your starting point.

00:26:14.690 --> 00:26:16.898
So or I'm saying is that
this proof is fairly robust.

00:26:19.880 --> 00:26:23.050
And we're going to
do some iterations.

00:26:26.680 --> 00:26:37.970
So as long as your partition
is not epsilon regular,

00:26:37.970 --> 00:26:44.660
we will do something to the
partition to move forward.

00:26:44.660 --> 00:26:54.590
And what we will do
is look at each pair

00:26:54.590 --> 00:26:59.600
of parts in your partition
that's not epsilon regular.

00:27:04.170 --> 00:27:05.960
Well, if they're
not epsilon regular,

00:27:05.960 --> 00:27:08.390
then I can find
a pair of subsets

00:27:08.390 --> 00:27:17.520
which are denoted by
the A's that witnesses

00:27:17.520 --> 00:27:26.880
this non regularity, that
witnesses the irregularity.

00:27:26.880 --> 00:27:29.370
And we start with
some partition.

00:27:29.370 --> 00:27:33.210
So now let us
refine the partition

00:27:33.210 --> 00:27:36.720
into a partition
in even more parts

00:27:36.720 --> 00:27:53.090
by simultaneously refining
the partition using

00:27:53.090 --> 00:28:00.360
all of these Ai, j's that
we found in the step above.

00:28:00.360 --> 00:28:01.930
So you start with
some partition.

00:28:01.930 --> 00:28:05.560
If it is not regular,
I can chop up

00:28:05.560 --> 00:28:08.120
the various parts in some way.

00:28:08.120 --> 00:28:12.090
So I start with some
partition over here.

00:28:12.090 --> 00:28:15.930
And what we are going to do is,
let's say between these two,

00:28:15.930 --> 00:28:18.180
it's not epsilon
regular, so I can

00:28:18.180 --> 00:28:23.260
find some pairs of vertex sets
that exhibits the irregularity.

00:28:23.260 --> 00:28:24.650
I chop it up.

00:28:24.650 --> 00:28:31.230
And I can keep further chopping
up the rest of the parts.

00:28:31.230 --> 00:28:33.420
If these two parts are
not epsilon regular,

00:28:33.420 --> 00:28:35.580
then I chop it up like that.

00:28:35.580 --> 00:28:38.802
And I can keep on doing it.

00:28:38.802 --> 00:28:40.260
And originally, I
have three parts.

00:28:40.260 --> 00:28:43.040
Now I have 12 parts.

00:28:43.040 --> 00:28:45.580
And this is a refined partition.

00:28:45.580 --> 00:28:49.130
And now I repeat
until I am done.

00:28:49.130 --> 00:28:52.490
I am done when I
obtain a partition that

00:28:52.490 --> 00:28:55.750
is epsilon regular.

00:28:55.750 --> 00:28:58.260
Now, the basic question when
it comes to the strategy

00:28:58.260 --> 00:29:00.270
is, are you ever
going to be done?

00:29:00.270 --> 00:29:02.570
When are you going to be done?

00:29:02.570 --> 00:29:04.650
And if this process
goes on forever

00:29:04.650 --> 00:29:07.047
or goes on for a very
long time, then you

00:29:07.047 --> 00:29:08.130
might have a lot of parts.

00:29:08.130 --> 00:29:09.600
But we want to
guarantee that there

00:29:09.600 --> 00:29:12.680
is a bounded number of parts.

00:29:12.680 --> 00:29:18.470
So what we will show is that--

00:29:18.470 --> 00:29:22.360
to show that you have a
small number of parts,

00:29:22.360 --> 00:29:24.740
in other words, why does
this process even stop--

00:29:30.915 --> 00:29:33.080
and in particular,
we want it to stop

00:29:33.080 --> 00:29:38.320
after a small number of
steps, after a bounded number

00:29:38.320 --> 00:29:40.750
of steps.

00:29:40.750 --> 00:29:43.560
And to do this, we will
define some notion called

00:29:43.560 --> 00:29:47.627
an "energy" of a partition.

00:29:51.370 --> 00:29:55.280
And this energy will increase.

00:29:55.280 --> 00:29:58.300
So first of all, the
energy is some quantity

00:29:58.300 --> 00:30:02.980
that we'll define that
lies between 0 and 1.

00:30:02.980 --> 00:30:05.860
It's some real number
lying between 0 and 1.

00:30:05.860 --> 00:30:17.800
And each step, the energy goes
up by some specific quantity.

00:30:22.920 --> 00:30:26.520
Therefore, because the energy
cannot increase past 1,

00:30:26.520 --> 00:30:30.200
this iteration stops after
a bounded number of steps.

00:30:33.160 --> 00:30:36.800
And once it's done,
we end up with

00:30:36.800 --> 00:30:42.000
a epsilon regular partition.

00:30:42.000 --> 00:30:44.800
So that's the basic strategy.

00:30:44.800 --> 00:30:49.620
And what I want to show you is
how to execute that strategy.

00:30:49.620 --> 00:30:50.986
Any questions so far?

00:30:50.986 --> 00:30:51.486
Yes.

00:30:51.486 --> 00:30:55.760
AUDIENCE: Just to clarify
[INAUDIBLE] a bit,

00:30:55.760 --> 00:30:59.574
if some Vi's into non-epsilon
regular partitions,

00:30:59.574 --> 00:31:04.347
is it possible for Ai,j and
Aik to overlap somehow, right?

00:31:04.347 --> 00:31:07.502
Just kind of make those
into three partitions?

00:31:07.502 --> 00:31:09.210
YUFEI ZHAO: So if I
understand correctly,

00:31:09.210 --> 00:31:13.880
you are worried about
between different pairs,

00:31:13.880 --> 00:31:15.110
you might have interactions.

00:31:15.110 --> 00:31:15.875
AUDIENCE: Yeah.

00:31:15.875 --> 00:31:17.500
YUFEI ZHAO: So you
have seen the proof,

00:31:17.500 --> 00:31:19.917
but I think this is actually
a very important and somewhat

00:31:19.917 --> 00:31:25.330
subtle point, is that I do
not refine at each step,

00:31:25.330 --> 00:31:27.520
I find a pair of
witnessing sets.

00:31:27.520 --> 00:31:31.860
I find all of these witnessing
sets all at the same time,

00:31:31.860 --> 00:31:35.758
and I refine
everything all at once.

00:31:35.758 --> 00:31:37.258
AUDIENCE: OK, so
it's like if you do

00:31:37.258 --> 00:31:39.780
have overlap between two
witnessing sets, that's OK?

00:31:39.780 --> 00:31:42.900
YUFEI ZHAO: That is OK,
because this step doesn't care.

00:31:42.900 --> 00:31:45.720
If you have two witnessing
sets that overlap, that is OK.

00:31:48.280 --> 00:31:49.210
We'll see the proof.

00:31:49.210 --> 00:31:49.815
Yes.

00:31:49.815 --> 00:31:51.273
AUDIENCE: Do you
just find one pair

00:31:51.273 --> 00:31:53.652
of witnessing sets
for each Vi, Vj,

00:31:53.652 --> 00:31:55.030
even though there might be more?

00:31:55.030 --> 00:31:56.488
YUFEI ZHAO: Question
is, do we find

00:31:56.488 --> 00:31:58.235
just one pair of
witnessing sets even

00:31:58.235 --> 00:31:59.360
though there could be more?

00:31:59.360 --> 00:32:00.100
And the answer is, yes.

00:32:00.100 --> 00:32:01.360
We just need to find one.

00:32:01.360 --> 00:32:02.430
There could be lots.

00:32:02.430 --> 00:32:04.600
So if it's not
epsilon regular, it

00:32:04.600 --> 00:32:07.600
might be very not
epsilon regular.

00:32:07.600 --> 00:32:11.450
And in fact, being a witnessing
set is a fairly robust notion.

00:32:11.450 --> 00:32:13.700
If you just take out a
small number of vertices,

00:32:13.700 --> 00:32:17.206
it's still a witnessing set.

00:32:17.206 --> 00:32:20.160
Any more questions?

00:32:20.160 --> 00:32:20.660
Great.

00:32:20.660 --> 00:32:25.090
So let's take a quick break
and then we'll see the proof.

00:32:25.090 --> 00:32:28.260
Let's get started with the
proof of Szemeredi's regularity

00:32:28.260 --> 00:32:29.050
lemma.

00:32:29.050 --> 00:32:31.420
And to do the proof,
I want to develop

00:32:31.420 --> 00:32:34.510
this notion of energy which
you saw in the proof sketch.

00:32:37.290 --> 00:32:39.830
So what do I mean by "energy?"

00:32:39.830 --> 00:32:46.640
First, if I-- let me
define some quantities.

00:32:46.640 --> 00:32:53.870
If I have two vertex
subsets, U and W,

00:32:53.870 --> 00:33:00.810
let me define this quantity,
q, which is basically

00:33:00.810 --> 00:33:05.470
the edge density squared.

00:33:05.470 --> 00:33:08.580
But I normalize it
somewhat according

00:33:08.580 --> 00:33:11.220
to how big U and W are.

00:33:14.560 --> 00:33:18.180
I'm going to use the
letter and N to denote

00:33:18.180 --> 00:33:26.880
the number of vertices in
G. So this is some cube.

00:33:26.880 --> 00:33:36.980
And for partitions, if I
have a pair of partitions,

00:33:36.980 --> 00:33:56.230
Pu of U into k parts, and the
partition Pw of W into l parts,

00:33:56.230 --> 00:34:14.770
I set this q of Pu and Pw to be
the quantity where I sum over

00:34:14.770 --> 00:34:18.370
basically all pairs,
one part from U,

00:34:18.370 --> 00:34:27.409
one part from W of this
q between Ui and Wj.

00:34:30.150 --> 00:34:32.010
So this is the density squared.

00:34:32.010 --> 00:34:35.909
And I'm taking some
kind of weighted average

00:34:35.909 --> 00:34:39.280
of the squared density.

00:34:39.280 --> 00:34:41.370
So here is a weighted average.

00:34:41.370 --> 00:34:44.280
If you prefer to think
about the special case

00:34:44.280 --> 00:34:47.310
where this partition
is an equipartition,

00:34:47.310 --> 00:34:51.750
then it is really the average
of these squared densities.

00:34:51.750 --> 00:34:53.070
It's a mean square density.

00:34:55.860 --> 00:35:07.450
And finally, for a partition
P of the vertex set of G

00:35:07.450 --> 00:35:18.560
into m parts, we define
this q of this partition P

00:35:18.560 --> 00:35:23.480
to be q of P with
itself according

00:35:23.480 --> 00:35:25.730
to the previous definition.

00:35:25.730 --> 00:35:32.000
Or in other words, I do this
double sum, i from 1 to m,

00:35:32.000 --> 00:35:37.460
j from 1 to m, q of Vi, Vj.

00:35:40.550 --> 00:35:42.660
And this is the quantity
that I will call

00:35:42.660 --> 00:35:53.300
the "energy" of the partition.

00:35:53.300 --> 00:36:01.440
It is a mean squared
density, some weighted mean

00:36:01.440 --> 00:36:05.220
of the edge densities
between pairs

00:36:05.220 --> 00:36:07.072
of parts in the partition.

00:36:09.970 --> 00:36:12.800
You might ask, why is
it called an energy?

00:36:12.800 --> 00:36:15.370
So you might see from
this formula here,

00:36:15.370 --> 00:36:19.250
it's some kind of a
mean square density,

00:36:19.250 --> 00:36:22.600
so it's some kind of
an average of squares.

00:36:22.600 --> 00:36:27.640
So in particular, it's some
kind of an L2 quantity.

00:36:27.640 --> 00:36:31.900
And there's a general
phenomenon in mathematics,

00:36:31.900 --> 00:36:35.110
I think borrowed from
physical intuitions,

00:36:35.110 --> 00:36:37.390
that you can pretty much
call anything that's

00:36:37.390 --> 00:36:40.900
an L2 quantity an energy.

00:36:40.900 --> 00:36:43.460
And so that's, I think,
where the name comes from.

00:36:46.260 --> 00:36:48.920
So this is the important
object for our proof.

00:36:48.920 --> 00:36:53.090
And let's see how to execute a
strategy, the energy increment

00:36:53.090 --> 00:36:56.410
argument outlined on
the board over there.

00:36:56.410 --> 00:37:01.060
So we want to show that you
can refine a partition that

00:37:01.060 --> 00:37:06.100
is not epsilon regular in such
a way that the energy goes up.

00:37:08.690 --> 00:37:11.960
And to do that, let me
state a few lemmas regarding

00:37:11.960 --> 00:37:14.930
the energy of a partition
under refinement.

00:37:24.230 --> 00:37:26.560
And the point of the
next several lemmas

00:37:26.560 --> 00:37:42.170
is that the energy never
decreases under refinement,

00:37:42.170 --> 00:37:48.020
and it sometimes increases
if your partition is not

00:37:48.020 --> 00:37:48.860
epsilon regular.

00:37:51.460 --> 00:37:54.380
So the first lemma
is that if you

00:37:54.380 --> 00:38:03.340
look at the energy between
a pair of partitions,

00:38:03.340 --> 00:38:11.730
it is never less than the energy
between the two vertex sets.

00:38:11.730 --> 00:38:22.540
So for instance, if you
have U and W like that,

00:38:22.540 --> 00:38:28.380
and I partition
them into Pu and Pw,

00:38:28.380 --> 00:38:31.000
and I measure the
energy, just basically

00:38:31.000 --> 00:38:35.620
the squared density between
U and V versus summing up

00:38:35.620 --> 00:38:38.700
the individual squared
densities after the partition,

00:38:38.700 --> 00:38:41.200
the left side is always at least
as great as the right side.

00:38:45.110 --> 00:38:47.080
So this is really a claim.

00:38:47.080 --> 00:38:49.925
It's a fairly simple
claim about convexity,

00:38:49.925 --> 00:38:51.550
but let me set it up
in a way that will

00:38:51.550 --> 00:38:54.440
help some of the later proofs.

00:38:54.440 --> 00:39:00.900
So let me define a
random variable, which

00:39:00.900 --> 00:39:02.772
I call Z, in the following way.

00:39:02.772 --> 00:39:04.230
So here's a process
that I will use

00:39:04.230 --> 00:39:06.510
to define this random variable.

00:39:06.510 --> 00:39:12.540
I will select x, little x, to
be a vertex uniformly chosen

00:39:12.540 --> 00:39:16.160
from U, from the
left vertex set.

00:39:16.160 --> 00:39:27.670
And I will select a vertex
y uniformly chosen from W.

00:39:27.670 --> 00:39:34.540
x and y, they fall into
some part in the partition.

00:39:34.540 --> 00:39:42.630
So suppose Ui is
the part where x i

00:39:42.630 --> 00:39:52.450
falls, and Wi is the set in
the partition where y falls.

00:39:52.450 --> 00:39:55.840
So Ui is a member
of this partition.

00:39:55.840 --> 00:40:00.500
Wi is a member of the
other partition of W.

00:40:00.500 --> 00:40:03.980
Then I define my
random variable Z

00:40:03.980 --> 00:40:11.870
to be the x density
between Ui and Wj.

00:40:11.870 --> 00:40:12.500
So it's Wj.

00:40:17.030 --> 00:40:19.170
So that's the definition.

00:40:19.170 --> 00:40:21.500
So pick x randomly.

00:40:21.500 --> 00:40:22.850
Pick y randomly.

00:40:22.850 --> 00:40:25.010
Suppose x falls in Ui.

00:40:25.010 --> 00:40:27.140
Suppose y falls in Uj.

00:40:27.140 --> 00:40:31.610
Then Z is the x density
between these two parts.

00:40:34.170 --> 00:40:37.120
So Z is some random variable.

00:40:37.120 --> 00:40:41.700
Let's look at properties
of this random variable.

00:40:41.700 --> 00:40:45.947
First, what is this,
it's expectation?

00:40:45.947 --> 00:40:47.280
It's a discrete random variable.

00:40:47.280 --> 00:40:49.363
And you can easily compute
all of these quantities

00:40:49.363 --> 00:40:54.670
by just summing up according
to how Z is generated.

00:40:54.670 --> 00:40:57.540
So I look overall, i and j.

00:40:57.540 --> 00:41:01.430
What's the probability
that x falls in Ui?

00:41:01.430 --> 00:41:04.680
It is the size of Ui
as a fraction of U.

00:41:04.680 --> 00:41:07.110
What's the probability
that y falls in Wj?

00:41:07.110 --> 00:41:13.080
It's the size of Wj as
a fraction of size W.

00:41:13.080 --> 00:41:17.460
And then Z is this
quantity here.

00:41:17.460 --> 00:41:24.390
So this is what I find to
be the expectation of Z.

00:41:24.390 --> 00:41:27.580
But you see the density
multiplied by the product

00:41:27.580 --> 00:41:31.090
of the vertex set sizes,
that's just the number of edges

00:41:31.090 --> 00:41:38.980
between U and W. And you
sum over all the i, j's.

00:41:38.980 --> 00:41:50.080
So that, which is simply the
edge density between U and W.

00:41:50.080 --> 00:41:53.570
So that's the expectation
of the Z variable.

00:41:53.570 --> 00:41:56.520
On the other hand,
what's the second moment?

00:41:56.520 --> 00:42:01.040
In other words, what's the
expectation of the square of Z?

00:42:01.040 --> 00:42:05.080
Again, we do the
same computation.

00:42:05.080 --> 00:42:06.280
First part is the same.

00:42:11.610 --> 00:42:13.760
The second part now
becomes a d squared.

00:42:19.610 --> 00:42:27.070
And look at how
we define energy.

00:42:27.070 --> 00:42:32.960
This quantity here is
basically the energy q

00:42:32.960 --> 00:42:37.460
between the partition U
and the partition of W,

00:42:37.460 --> 00:42:40.630
except there's normalization.

00:42:40.630 --> 00:42:43.140
That's not quite the same
as the one we used before.

00:42:43.140 --> 00:42:45.620
So we will just put
in that normalization.

00:42:54.740 --> 00:42:57.440
So now you compare
the expectation

00:42:57.440 --> 00:43:01.540
of Z versus the
expectation of Z squared.

00:43:01.540 --> 00:43:09.030
And we know by convexity that
the expectation of Z squared

00:43:09.030 --> 00:43:13.530
is at least as large as
the expectation of Z,

00:43:13.530 --> 00:43:14.640
that quantity squared.

00:43:17.400 --> 00:43:22.710
But if you plug in what values
you get for these two guys,

00:43:22.710 --> 00:43:29.140
you derive the inequality
claimed in Lemma 1.

00:43:32.260 --> 00:43:34.300
You have to cancel some
normalization factors,

00:43:34.300 --> 00:43:35.217
but that's easy to do.

00:43:37.717 --> 00:43:38.800
So that's the first lemma.

00:43:43.060 --> 00:43:46.230
So the first one is just
about a pair of parts,

00:43:46.230 --> 00:43:49.330
and identify
partition, each part,

00:43:49.330 --> 00:43:52.030
what happens to the
energy between this pair.

00:43:52.030 --> 00:43:54.820
And the second one is a direct
corollary of the first one.

00:43:54.820 --> 00:43:57.760
It says that if you
have a second partition,

00:43:57.760 --> 00:44:08.660
P prime that refines P, then the
energy of the second partition,

00:44:08.660 --> 00:44:11.510
the refinement, is never
less than the energy

00:44:11.510 --> 00:44:12.887
of the first partition.

00:44:15.570 --> 00:44:18.660
And it is a direct consequence
of the first lemma,

00:44:18.660 --> 00:44:32.790
because we simply apply this
lemma to every pair of parts

00:44:32.790 --> 00:44:39.890
in P. Between every
pair of parts,

00:44:39.890 --> 00:44:41.520
the energy can never go down.

00:44:41.520 --> 00:44:43.600
So overall, the energy
does not go down.

00:44:48.150 --> 00:44:52.170
And finally, so far, we've just
said that the partitions can

00:44:52.170 --> 00:44:54.550
never make the energy go down.

00:44:54.550 --> 00:44:56.190
But in order to
do this proof, we

00:44:56.190 --> 00:44:58.740
need to show that the
energy sometimes goes up.

00:45:01.203 --> 00:45:02.870
And that's the point
of the third lemma.

00:45:02.870 --> 00:45:10.400
The third Lemma tells us that
you can get an energy boost.

00:45:10.400 --> 00:45:12.020
So this is the Red Bull Lemma.

00:45:12.020 --> 00:45:16.962
You can get an energy boost
if you are feeling irregular.

00:45:20.820 --> 00:45:28.360
So if U, W is not
epsilon regular,

00:45:28.360 --> 00:45:37.270
and this epsilon regularity
is witnessed by U1 in U and W1

00:45:37.270 --> 00:45:51.070
in W, then I claim that the
energy obtained by chopping U

00:45:51.070 --> 00:46:00.260
into U1 and its
complement against W1,

00:46:00.260 --> 00:46:10.260
against the complement of W1
and W, so here again U and W,

00:46:10.260 --> 00:46:15.830
I find a witnessing set
for their irregularity.

00:46:15.830 --> 00:46:18.980
And now I partition left
and right according to--

00:46:18.980 --> 00:46:22.190
chop each part into two.

00:46:22.190 --> 00:46:25.900
So this energy
between this partition

00:46:25.900 --> 00:46:33.670
into two on both sides is
bigger than the original energy

00:46:33.670 --> 00:46:38.280
plus something
where we can gain.

00:46:38.280 --> 00:46:41.660
And this something where
we can gain turns out

00:46:41.660 --> 00:46:46.050
to be at least epsilon
raised to the power

00:46:46.050 --> 00:46:52.095
4 times the size of U, size
of W, divided by n squared.

00:47:02.860 --> 00:47:03.700
Can you prove it?

00:47:08.190 --> 00:47:15.250
Let's define Z the same
as in the previous proof,

00:47:15.250 --> 00:47:17.550
as in the proof of Lemma 1.

00:47:22.180 --> 00:47:26.070
In Lemma 1, we just used the
fact that the L2 norm of Z,

00:47:26.070 --> 00:47:28.985
the expectation of the
square, is at least

00:47:28.985 --> 00:47:30.610
the square of the expectation.

00:47:30.610 --> 00:47:32.360
But actually, there
are differences in it.

00:47:32.360 --> 00:47:35.108
It's called a "variance."

00:47:35.108 --> 00:47:38.780
The variance of Z
is the difference

00:47:38.780 --> 00:47:41.340
between these two quantities.

00:47:41.340 --> 00:47:44.852
I know that it's
always non-negative.

00:47:47.810 --> 00:47:51.115
So if you look at how we
derived the expectation of Z

00:47:51.115 --> 00:47:53.320
and expectation of Z
squared, you immediately

00:47:53.320 --> 00:48:01.080
see that its
variance we can write

00:48:01.080 --> 00:48:07.230
as, up to a normalizing
factor, the difference

00:48:07.230 --> 00:48:20.090
between this energy on one hand
and the energy between U and W,

00:48:20.090 --> 00:48:26.380
namely the mean square
of the normalization.

00:48:26.380 --> 00:48:31.810
On the other hand, a different
way to calculate the variance

00:48:31.810 --> 00:48:38.500
is that it is equal to the
expectation of the deviation

00:48:38.500 --> 00:48:40.150
from the mean squared.

00:48:44.310 --> 00:48:47.320
So let's think about the
deviation from the mean.

00:48:47.320 --> 00:48:53.940
I am choosing a random
vector in, on the left, U,

00:48:53.940 --> 00:48:57.240
and another random point,
random vertex on the left,

00:48:57.240 --> 00:49:00.570
and a random point on the right.

00:49:00.570 --> 00:49:05.220
In the event that they
both lie in the sets

00:49:05.220 --> 00:49:17.110
that witness the
irregularity, so in the event

00:49:17.110 --> 00:49:21.430
where x falls here
and y falls here,

00:49:21.430 --> 00:49:24.930
which occurs with
this probability,

00:49:24.930 --> 00:49:36.310
see that this quantity here is
equal to the density between U1

00:49:36.310 --> 00:49:40.730
and W1 minus the density--

00:49:40.730 --> 00:49:44.470
and this expectation
of Z is just

00:49:44.470 --> 00:49:50.710
the density between U and W. So
interpreting this expectation

00:49:50.710 --> 00:49:55.750
for what happens
when x falls in U1

00:49:55.750 --> 00:50:02.210
and when y falls in W1,
ignoring all the other events,

00:50:02.210 --> 00:50:06.230
because the quantity is always
non-negative everywhere.

00:50:06.230 --> 00:50:14.660
But now from the definition
of epsilon regularity,

00:50:14.660 --> 00:50:19.010
or rather the witnessing
of epsilon irregularity,

00:50:19.010 --> 00:50:26.560
you see that this U1 is at least
an epsilon fraction of U. W1's

00:50:26.560 --> 00:50:29.800
at least an epsilon
fraction of W.

00:50:29.800 --> 00:50:35.500
And this final quantity here
is at least epsilon inside, so

00:50:35.500 --> 00:50:38.600
at least epsilon squared.

00:50:38.600 --> 00:50:41.110
So here we're using all
the different components

00:50:41.110 --> 00:50:43.270
of the definition
of epsilon regular.

00:50:43.270 --> 00:50:44.506
Yes.

00:50:44.506 --> 00:50:48.988
AUDIENCE: What happens if we're
dividing with more witnessing

00:50:48.988 --> 00:50:50.705
sets?

00:50:50.705 --> 00:50:52.080
YUFEI ZHAO: So
you're asking what

00:50:52.080 --> 00:50:54.150
happens if we divide with
more witnessing sets?

00:50:54.150 --> 00:50:55.650
So hold onto that thought.

00:50:55.650 --> 00:50:58.050
So right now, I'm just
showing what happens

00:50:58.050 --> 00:50:59.640
if you have one witnessing set.

00:51:02.250 --> 00:51:04.590
Any more questions?

00:51:04.590 --> 00:51:08.070
So here we have
epsilon to the 4th.

00:51:08.070 --> 00:51:11.010
And if you're putting
the normalization

00:51:11.010 --> 00:51:14.180
comparing these two
interpretations,

00:51:14.180 --> 00:51:16.490
you'll find the inequality
claimed by the lemma.

00:51:23.180 --> 00:51:28.470
So now we are ready to show
the key part of this iteration.

00:51:31.080 --> 00:51:33.720
I'll show you precisely how
this iteration works, and show

00:51:33.720 --> 00:51:39.270
that you always get an energy
boost in the overall partition.

00:51:39.270 --> 00:51:43.110
So I'll call the
next one Lemma 4.

00:51:43.110 --> 00:51:52.350
And this says that if you have
a partition P of the vertex set

00:51:52.350 --> 00:52:01.040
of G into k parts, if this
partition is not epsilon

00:52:01.040 --> 00:52:21.900
regular, then there exists a
refinement called Q where every

00:52:21.900 --> 00:52:35.720
part V sub i is partitioned
further into at most 2 the k

00:52:35.720 --> 00:52:46.180
parts, and such that
the partition of Q--

00:52:46.180 --> 00:52:49.070
so the energy of the
new partition Q--

00:52:49.070 --> 00:52:54.800
increases substantially from
the previous partition P.

00:52:54.800 --> 00:52:56.300
And we'll show that
you can increase

00:52:56.300 --> 00:53:02.690
by at least epsilon
to the 5th power,

00:53:02.690 --> 00:53:05.133
some constant in epsilon.

00:53:05.133 --> 00:53:06.800
So if you look at the
strategy up there,

00:53:06.800 --> 00:53:08.960
if you can do this
every step, then that

00:53:08.960 --> 00:53:10.610
means that the
number of iterations

00:53:10.610 --> 00:53:13.670
is bounded by 1 over
epsilon to the 5th power.

00:53:22.580 --> 00:53:27.480
So to prove this lemma here,
we will use the three lemmas

00:53:27.480 --> 00:53:29.580
up there and put them together.

00:53:35.900 --> 00:53:43.710
So for all the pairs
i, j such that V sub i,

00:53:43.710 --> 00:53:51.310
V sub j is not epsilon
regular, as outlined

00:53:51.310 --> 00:53:53.800
in the proof in the
outline up there,

00:53:53.800 --> 00:54:02.350
we will find this A
superscript i, j in Vi,

00:54:02.350 --> 00:54:11.869
and A superscript j, i in Vj
that witness the irregularity.

00:54:17.250 --> 00:54:23.180
So do this simultaneously
for all pairs i, comma, j,

00:54:23.180 --> 00:54:25.550
where the Vi, Vj is
not epsilon regular.

00:54:28.390 --> 00:54:34.900
Now what we're going to define
Q as is the common refinement.

00:54:34.900 --> 00:54:37.390
So take all of,
just as indicated

00:54:37.390 --> 00:54:39.550
in that picture up
there, simultaneously

00:54:39.550 --> 00:54:55.040
take all of these A's and use
them to refine P. Starting

00:54:55.040 --> 00:54:57.080
with P, starting with
a partition you have,

00:54:57.080 --> 00:54:59.750
simultaneously cut
everything up using

00:54:59.750 --> 00:55:01.240
all of these witnessing sets.

00:55:05.980 --> 00:55:09.560
Now, we only have
witnessing pairs for pairs

00:55:09.560 --> 00:55:10.970
that are not epsilon regular.

00:55:10.970 --> 00:55:13.262
If they're epsilon regular,
you don't worry about them.

00:55:19.570 --> 00:55:21.390
One of the claims in
the lemma now is--

00:55:21.390 --> 00:55:23.160
this is the Q that
we'll end up with.

00:55:23.160 --> 00:55:25.470
We'll show that this
Q has that property.

00:55:25.470 --> 00:55:26.880
So one of the
claims in the lemma

00:55:26.880 --> 00:55:33.390
is that every Vi is partitioned
into at most 2 to the k parts.

00:55:33.390 --> 00:55:37.710
So I hope that part is
clear, because how are we

00:55:37.710 --> 00:55:39.360
doing the refinement?

00:55:39.360 --> 00:55:40.520
We're taking Vi.

00:55:44.810 --> 00:55:57.610
It's divided into
parts using these A i,

00:55:57.610 --> 00:56:06.850
j's, one j coming from each
pair that is irregular with Vi.

00:56:06.850 --> 00:56:12.500
So I'm cutting up Vi
using at most k sets,

00:56:12.500 --> 00:56:15.090
so one coming from each
of the other possible.

00:56:15.090 --> 00:56:18.090
Maybe fewer than k-- that's
fine-- but at most k sets

00:56:18.090 --> 00:56:20.630
are used to cut up each Vi.

00:56:20.630 --> 00:56:24.355
So you have at most
2 to the k parts

00:56:24.355 --> 00:56:25.480
once you cut everything up.

00:56:30.820 --> 00:56:39.570
But the tricky part is to show
that you get an energy boost.

00:56:39.570 --> 00:56:40.320
So let's do this.

00:56:40.320 --> 00:56:42.153
How do we show that you
get an energy boost?

00:56:49.720 --> 00:56:52.020
We're going to put the
top three lemmas together.

00:56:54.864 --> 00:57:01.510
First, we want to
analyze the energy of Q.

00:57:01.510 --> 00:57:03.320
So let's write it out.

00:57:03.320 --> 00:57:12.790
So the energy of Q is the sum
over this energy of individual

00:57:12.790 --> 00:57:14.020
partitions of the Vi's.

00:57:17.810 --> 00:57:28.280
And by this P sub Vi, P sub
Vj, I mean the partition of Vj

00:57:28.280 --> 00:57:36.060
given by Q. So what happens
after you cut up the Vi--

00:57:36.060 --> 00:57:43.170
that's what I mean by P sub
Vj, or rather I should call it

00:57:43.170 --> 00:57:45.070
Q sub Vi, Q sub Vj.

00:57:52.260 --> 00:58:01.830
By Lemma 2, we find that--

00:58:01.830 --> 00:58:04.490
so let me separate
them into two cases.

00:58:04.490 --> 00:58:10.650
The first case sums
over i, j such that Vi,

00:58:10.650 --> 00:58:16.140
Vj is epsilon regular.

00:58:16.140 --> 00:58:22.620
And by Lemma 1, so here
we're using Lemma 1,

00:58:22.620 --> 00:58:29.130
we find that this quantity
here cannot be less than the Q

00:58:29.130 --> 00:58:31.580
of Vi, Vj.

00:58:31.580 --> 00:58:35.510
So take those two parts.

00:58:35.510 --> 00:58:38.680
Before and after
the refinement by Q,

00:58:38.680 --> 00:58:39.830
the energy cannot go down.

00:58:43.660 --> 00:58:47.780
So I don't worry too much about
pairs that are epsilon regular.

00:58:47.780 --> 00:58:51.900
But no let me look up here
that are not epsilon regular.

00:59:05.630 --> 00:59:09.685
So what we will do
now is even though--

00:59:09.685 --> 00:59:11.310
so let's look at that
picture up there.

00:59:15.750 --> 00:59:20.970
So let's focus on
what I drew in red.

00:59:20.970 --> 00:59:24.670
So let's focus between 1 and 2.

00:59:24.670 --> 00:59:32.280
So suppose the shaded part
is the witnessing sets.

00:59:32.280 --> 00:59:34.890
The witnessing sets
got cut up further

00:59:34.890 --> 00:59:39.490
by other witnessing sets.

00:59:39.490 --> 00:59:46.810
But I don't have to worry about
them because Lemma 2 or Lemma

00:59:46.810 --> 00:59:53.110
1, really, tells me that I
can do an inequality where

00:59:53.110 --> 01:00:00.940
I go down to just comparing the
energy between this partition

01:00:00.940 --> 01:00:05.030
of two parts, this
single witnessing set

01:00:05.030 --> 01:00:16.250
and its complement, versus
what happens in its partner.

01:00:24.620 --> 01:00:32.600
So in other words, over
here, the Q of this pair,

01:00:32.600 --> 01:00:40.670
I am saying that it is
no less than if I just

01:00:40.670 --> 01:00:47.280
look at what happens if you
only cut up these two sets using

01:00:47.280 --> 01:00:47.950
the red lines.

01:00:55.790 --> 01:00:57.960
Let's go on.

01:00:57.960 --> 01:01:02.400
Applying Lemma 3, the
energy boost lemma,

01:01:02.400 --> 01:01:04.960
the first part stays the same.

01:01:04.960 --> 01:01:06.820
So this first part
stays the same.

01:01:06.820 --> 01:01:08.640
And the second part,
now, because I'm

01:01:08.640 --> 01:01:11.160
looking at witnessing
sets for irregularity,

01:01:11.160 --> 01:01:12.630
I get this extra boost.

01:01:15.950 --> 01:01:19.240
So this goes back to one of
the questions asked earlier,

01:01:19.240 --> 01:01:23.260
where in Lemma 3, I don't have
to now worry about what happens

01:01:23.260 --> 01:01:28.780
if you have further cuts,
because I only need to worry

01:01:28.780 --> 01:01:31.240
about the case where I
only have a single cut

01:01:31.240 --> 01:01:34.740
between the epsilon
irregular pairs.

01:01:34.740 --> 01:01:39.900
So putting it together, we
see that the previous line

01:01:39.900 --> 01:01:48.740
is at least, if you sum over
the Q's of all the pairs

01:01:48.740 --> 01:01:59.420
plus this extra epsilon to
the 4th term for all pairs

01:01:59.420 --> 01:02:01.540
that are not epsilon regular.

01:02:17.890 --> 01:02:23.840
I'm applying monotonicity
of energy for the types,

01:02:23.840 --> 01:02:25.760
for pairs that are
epsilon regular,

01:02:25.760 --> 01:02:29.080
an energy boost for pairs
that are not epsilon regular.

01:02:29.080 --> 01:02:33.118
And for the latter type,
I obtain this boost.

01:02:33.118 --> 01:02:35.160
Now remember what's the
definition of an "epsilon

01:02:35.160 --> 01:02:36.270
regular partition."

01:02:36.270 --> 01:02:38.100
Unfortunately, it's no
longer on the board,

01:02:38.100 --> 01:02:42.890
but it says that
this sum over here,

01:02:42.890 --> 01:02:44.990
if it is an epsilon
regular partition,

01:02:44.990 --> 01:02:47.660
it is at most epsilon.

01:02:47.660 --> 01:02:51.980
So if it is not epsilon
regular, we can lower bound it.

01:02:51.980 --> 01:02:55.680
And that's indeed
what we will do.

01:02:55.680 --> 01:02:58.050
The first sum here
is, by definition,

01:02:58.050 --> 01:03:04.020
Q of the partition P.
And the second sum,

01:03:04.020 --> 01:03:07.890
by the definition
of epsilon regular,

01:03:07.890 --> 01:03:12.840
is at least epsilon
to the power 5.

01:03:12.840 --> 01:03:14.480
So here we're using
the definition

01:03:14.480 --> 01:03:17.590
of epsilon regular
partition, namely,

01:03:17.590 --> 01:03:22.330
that a large fraction,
so at least an epsilon

01:03:22.330 --> 01:03:28.240
fraction, basically,
of pairs of vertex sets

01:03:28.240 --> 01:03:34.940
are not epsilon regular,
but in this weighted sense.

01:03:34.940 --> 01:03:38.106
And that finishes the
proof of Lemma 4 up there.

01:03:41.760 --> 01:03:42.930
Any questions so far?

01:03:47.650 --> 01:03:50.890
All right, so now we are
ready to finish everything

01:03:50.890 --> 01:03:53.750
off, and prove Szemeredi's
regularity lemma.

01:04:21.530 --> 01:04:28.280
So let's prove Szemeredi's
regularity lemma.

01:04:33.480 --> 01:04:43.160
Let's start with the
trivial partition,

01:04:43.160 --> 01:04:46.250
meaning just one large part.

01:04:46.250 --> 01:04:53.880
And we are going
to repeatedly apply

01:04:53.880 --> 01:05:01.060
Lemma 4 whenever the
partition at hand

01:05:01.060 --> 01:05:14.290
is not regular, whenever
the current partition is not

01:05:14.290 --> 01:05:15.190
epsilon regular.

01:05:20.600 --> 01:05:22.930
So let's look at its energy.

01:05:22.930 --> 01:05:28.590
The energy of this partition--

01:05:28.590 --> 01:05:34.860
so this is a weighted mean
of the edge density squared,

01:05:34.860 --> 01:05:40.020
so it always lies
between 0 and 1,

01:05:40.020 --> 01:05:44.760
just from the
definition of energy.

01:05:44.760 --> 01:05:51.990
On the other hand,
Lemma 4 tells us

01:05:51.990 --> 01:06:00.840
that the energy increases by at
least epsilon to the 5th power

01:06:00.840 --> 01:06:03.304
at each iteration.

01:06:10.570 --> 01:06:14.370
So this process cannot
continue forever.

01:06:14.370 --> 01:06:23.408
So it must stop after at most
epsilon to the minus 5th power

01:06:23.408 --> 01:06:24.075
number of steps.

01:06:27.080 --> 01:06:32.590
And when we stop, we must
result in an epsilon regular

01:06:32.590 --> 01:06:39.220
partition, because
otherwise, you're

01:06:39.220 --> 01:06:43.156
going to continue applying the
lemma and push it even further.

01:06:43.156 --> 01:06:46.240
And that's it.

01:06:46.240 --> 01:06:50.500
So that proves Szemeredi's
graph regularity lemma.

01:06:53.440 --> 01:06:54.910
Question.

01:06:54.910 --> 01:06:57.360
AUDIENCE: It's going to be
some really big value of M.

01:06:57.360 --> 01:06:59.030
YUFEI ZHAO: OK, let's
talk about bounds.

01:06:59.030 --> 01:07:00.490
So let's talk about
how many parts.

01:07:06.580 --> 01:07:11.410
So how many parts does
this proof produce?

01:07:11.410 --> 01:07:12.350
We can figure it out.

01:07:12.350 --> 01:07:14.470
So we have some number of steps.

01:07:14.470 --> 01:07:18.440
Each step increases the
number of parts by something.

01:07:18.440 --> 01:07:30.840
So if P has k parts,
so then Lemma 4 refines

01:07:30.840 --> 01:07:37.910
P into at most how many parts?

01:07:37.910 --> 01:07:38.823
AUDIENCE: 2 to the k

01:07:38.823 --> 01:07:40.490
YUFEI ZHAO: Yeah, so
k times 2 to the k.

01:07:44.330 --> 01:07:48.720
And I have many
iterations of this guy.

01:07:48.720 --> 01:07:50.220
So some of you are
already laughing,

01:07:50.220 --> 01:07:53.280
because it's going to
be a very large number.

01:07:53.280 --> 01:07:55.310
In fact, because it's
going to be so large,

01:07:55.310 --> 01:07:57.460
it makes my calculations
slightly more convenient.

01:07:57.460 --> 01:07:58.918
It really doesn't
change the answer

01:07:58.918 --> 01:08:01.820
so much if I just bound k to
the 2 to the k by 2 to the 2

01:08:01.820 --> 01:08:03.050
to the k.

01:08:03.050 --> 01:08:10.440
So the final number of
parts is this function

01:08:10.440 --> 01:08:15.030
iterated on itself epsilon
to the minus 5 times.

01:08:15.030 --> 01:08:22.590
So it's a power of 2 of height
at most 2 to the epsilon

01:08:22.590 --> 01:08:23.090
to the 5.

01:08:26.560 --> 01:08:29.477
It's a finite number, so it
depends only on epsilon and not

01:08:29.477 --> 01:08:30.560
on the size of your graph.

01:08:30.560 --> 01:08:32.102
And this is the most
important thing.

01:08:32.102 --> 01:08:35.290
It does not depend on
the size of your graph.

01:08:35.290 --> 01:08:38.020
It is quite large.

01:08:38.020 --> 01:08:42.880
In fact, even for reasonable
values of epsilon,

01:08:42.880 --> 01:08:48.850
like 1% or even 10%, this
number is astronomically large.

01:08:48.850 --> 01:08:51.490
And you may ask is
it really necessary,

01:08:51.490 --> 01:08:54.372
because we did this proof, and
it came out fairly elegantly,

01:08:54.372 --> 01:08:56.080
I would say it, how
the proof was set up.

01:08:56.080 --> 01:08:58.779
And you arrived at
this finite bound.

01:08:58.779 --> 01:09:00.319
But maybe there's
a better proof.

01:09:00.319 --> 01:09:04.170
Maybe you can work harder and
obtain somewhat better bounds.

01:09:04.170 --> 01:09:08.250
So you can ask, is it possible
that the truth is really

01:09:08.250 --> 01:09:11.103
somehow much smaller?

01:09:11.103 --> 01:09:12.520
And the answer
turns out to be no.

01:09:15.189 --> 01:09:21.100
So there is a
theorem by Tim Gowers

01:09:21.100 --> 01:09:24.087
which says that there
exists some constant.

01:09:24.087 --> 01:09:26.170
The precise statement,
again, is not so important,

01:09:26.170 --> 01:09:28.899
but based on what I just said,
you cannot improve this bound

01:09:28.899 --> 01:09:31.180
given by this proof.

01:09:31.180 --> 01:09:38.910
So for every epsilon
small enough,

01:09:38.910 --> 01:09:48.470
there exists a graph whose
epsilon regular partition

01:09:48.470 --> 01:09:54.120
requires how many parts?

01:09:54.120 --> 01:10:02.950
So the number of parts at
least this tower of 2 of height

01:10:02.950 --> 01:10:06.010
some epsilon to the minus c.

01:10:09.630 --> 01:10:15.200
So really it's a tower
of exponentials of size,

01:10:15.200 --> 01:10:18.800
essentially polynomial
in 1 over epsilon.

01:10:18.800 --> 01:10:22.250
So maybe you can squeeze
the 5 to something less.

01:10:22.250 --> 01:10:24.250
Actually, we don't even
know if that's the case,

01:10:24.250 --> 01:10:28.700
but certainly you cannot do
substantially better than what

01:10:28.700 --> 01:10:31.530
the proof gives.

01:10:31.530 --> 01:10:36.600
So Szemeredi's regularity lemma
is an extremely powerful tool.

01:10:36.600 --> 01:10:41.550
And we'll see applications
that are basically

01:10:41.550 --> 01:10:42.560
very difficult to prove.

01:10:42.560 --> 01:10:44.260
And for some of
these applications,

01:10:44.260 --> 01:10:45.960
we don't really
know other proofs

01:10:45.960 --> 01:10:48.760
except using Szemeredi's
regularity lemma.

01:10:48.760 --> 01:10:52.680
But on the other hand, it gives
terrible quantitative bounds.

01:10:52.680 --> 01:10:57.450
So there is a lot of
interest in combinatorics

01:10:57.450 --> 01:11:01.400
where once you see a proof that
requires Szemeredi's regularity

01:11:01.400 --> 01:11:04.020
lemma, or that is first
proved using this technique,

01:11:04.020 --> 01:11:07.870
to ask can it be used
using some other technique?

01:11:07.870 --> 01:11:12.270
In fact, Szemeredi himself has
worked a lot in that direction,

01:11:12.270 --> 01:11:14.854
trying to get rid of
the uses of his lemma.

01:11:19.500 --> 01:11:22.410
Any questions?

01:11:22.410 --> 01:11:25.120
AUDIENCE: How could you
modify it for equipartitions?

01:11:25.120 --> 01:11:26.170
YUFEI ZHAO: OK, great.

01:11:26.170 --> 01:11:29.038
Question is, how can we
modify it for equipartitions?

01:11:29.038 --> 01:11:30.080
So let's talk about that.

01:11:30.080 --> 01:11:32.370
So it's a fantastic question.

01:11:32.370 --> 01:11:34.420
So look at this proof
and see what can we

01:11:34.420 --> 01:11:37.720
do if we really want
all the parts to have

01:11:37.720 --> 01:11:41.280
roughly the same size, let's
say differing by at most 1.

01:12:00.800 --> 01:12:09.929
So how to make the epsilon
regular partition equitable?

01:12:14.920 --> 01:12:16.220
Any guesses?

01:12:16.220 --> 01:12:18.810
Any attempts on what we can do?

01:12:18.810 --> 01:12:21.920
I mean, basically it's
going to follow this proof.

01:12:21.920 --> 01:12:24.410
As I said, the spirit of
Szemeredi's regularity lemma

01:12:24.410 --> 01:12:25.630
is what I've shown you.

01:12:25.630 --> 01:12:28.640
But the details and
executions may vary somewhat

01:12:28.640 --> 01:12:31.210
depending on the specific
purpose you have in mind.

01:12:31.210 --> 01:12:31.792
Yeah.

01:12:31.792 --> 01:12:33.238
AUDIENCE: Can we just add--

01:12:33.238 --> 01:12:35.166
[INAUDIBLE] add things
to the smaller part

01:12:35.166 --> 01:12:38.058
because we know
that-- by the fact

01:12:38.058 --> 01:12:41.440
that it's not [INAUDIBLE]
that parts aren't too small?

01:12:41.440 --> 01:12:44.510
YUFEI ZHAO: OK, so you're saying
we're going to add something

01:12:44.510 --> 01:12:46.790
or to massage the partition
to make it epsilon--

01:12:46.790 --> 01:12:48.870
AUDIENCE: Add vertices to the
smaller parts of the partition.

01:12:48.870 --> 01:12:51.495
YUFEI ZHAO: Add vertices to the
smaller parts of the partition,

01:12:51.495 --> 01:12:53.828
now when are you
going to do that?

01:12:53.828 --> 01:12:56.323
AUDIENCE: When they're-- like
so you do the refinement,

01:12:56.323 --> 01:12:58.183
then when they're
not [INAUDIBLE]

01:12:58.183 --> 01:12:59.600
YUFEI ZHAO: So you
want to do this

01:12:59.600 --> 01:13:01.337
at every stage of the process.

01:13:01.337 --> 01:13:01.920
AUDIENCE: Yes.

01:13:01.920 --> 01:13:04.500
[INAUDIBLE]

01:13:04.500 --> 01:13:06.100
YUFEI ZHAO: I like that idea.

01:13:06.100 --> 01:13:09.920
So here's what
we're going to do.

01:13:09.920 --> 01:13:12.410
So we still run
the same process.

01:13:12.410 --> 01:13:15.760
So we're going to have this P,
which is the current partition.

01:13:15.760 --> 01:13:20.980
So I have current partition.

01:13:20.980 --> 01:13:24.730
And as before, we
initially have it

01:13:24.730 --> 01:13:27.420
as either the trivial
partition, if you like,

01:13:27.420 --> 01:13:32.160
or m arbitrary equitable parts.

01:13:37.418 --> 01:13:39.210
Start with something
where you don't really

01:13:39.210 --> 01:13:41.940
care about anything
except for the size.

01:13:41.940 --> 01:13:46.080
And you run basically
the same proof,

01:13:46.080 --> 01:13:53.000
where if your P is
not epsilon regular,

01:13:53.000 --> 01:13:56.750
then do what we've done
before, so basically

01:13:56.750 --> 01:13:58.160
exactly the same thing.

01:13:58.160 --> 01:14:13.590
We refine P using pairs
witnessing regularity,

01:14:13.590 --> 01:14:15.750
same as the proof
that we just did.

01:14:15.750 --> 01:14:17.910
And now we need to do
something a little bit more

01:14:17.910 --> 01:14:21.480
to obtain equitability.

01:14:21.480 --> 01:14:24.660
And what we will
do is right after--

01:14:24.660 --> 01:14:29.180
so each step in iteration, right
after we do this refinement,

01:14:29.180 --> 01:14:36.180
so after we cut up our graph
where maybe some of the parts

01:14:36.180 --> 01:14:45.560
are really tiny, let's massage
the partitions somewhat

01:14:45.560 --> 01:14:47.210
to make them equitable.

01:14:47.210 --> 01:14:51.000
And to make our life
a little bit easier,

01:14:51.000 --> 01:14:56.130
we can refine the
partition somewhat further

01:14:56.130 --> 01:15:00.720
to chop it up into somewhat
smaller resolution.

01:15:00.720 --> 01:15:03.050
And this part, you
can really do it

01:15:03.050 --> 01:15:04.370
either arbitrarily or randomly.

01:15:06.950 --> 01:15:10.888
Some ways may be slightly
easier to execute,

01:15:10.888 --> 01:15:12.680
but it doesn't really
matter how you do it.

01:15:12.680 --> 01:15:13.970
It's fairly robust.

01:15:13.970 --> 01:15:16.460
You refine it further.

01:15:16.460 --> 01:15:20.500
And basically, I want
to make it equitable.

01:15:20.500 --> 01:15:23.260
Sometimes, you can just
do that by refining,

01:15:23.260 --> 01:15:25.810
but maybe if you have
some really small parts,

01:15:25.810 --> 01:15:28.300
then you might need to
move some vertices around,

01:15:28.300 --> 01:15:31.150
so I call that "rebalancing."

01:15:34.040 --> 01:15:41.600
So move and merge some vertices,
but only a very small number

01:15:41.600 --> 01:15:45.578
of vertices, to make equitable.

01:15:50.960 --> 01:15:55.713
So you run this loop until you
find that your partition is

01:15:55.713 --> 01:15:56.380
epsilon regular.

01:15:56.380 --> 01:15:58.000
Then you're done.

01:15:58.000 --> 01:15:59.950
Whenever you run this
loop, because we're

01:15:59.950 --> 01:16:02.080
doing the second
step, your partition

01:16:02.080 --> 01:16:05.900
is always going to be equitable.

01:16:05.900 --> 01:16:09.110
But we now need to
control the energy again

01:16:09.110 --> 01:16:12.260
to limit the number of steps.

01:16:12.260 --> 01:16:15.330
And the point here is
that the first part still

01:16:15.330 --> 01:16:20.850
is exactly the same as before,
where the energy goes up

01:16:20.850 --> 01:16:25.720
by at least epsilon
to the minus 5.

01:16:25.720 --> 01:16:28.360
But the second part, the
energy might go down,

01:16:28.360 --> 01:16:30.850
because we're no longer
refining, just refining.

01:16:30.850 --> 01:16:34.270
Because we're doing
some rebalancing.

01:16:34.270 --> 01:16:36.880
But you can do it in such a way
that the amount of rebalancing

01:16:36.880 --> 01:16:39.220
that you do is really small.

01:16:39.220 --> 01:16:42.100
You're not actually changing
the energy by so much.

01:16:42.100 --> 01:16:45.980
So I'll just hand
wave here, and say

01:16:45.980 --> 01:16:52.980
that we can do this in such
a way where the energy might

01:16:52.980 --> 01:16:56.550
go down, but only a little bit.

01:17:02.240 --> 01:17:04.040
So you're only changing
a very small number

01:17:04.040 --> 01:17:07.430
of vertices, very small
fraction of vertices.

01:17:07.430 --> 01:17:09.950
So if you change only an
epsilon fraction of vertices,

01:17:09.950 --> 01:17:12.200
you don't expect
the energy, which

01:17:12.200 --> 01:17:17.000
is something that comes out of
summing pairs of vertex parts,

01:17:17.000 --> 01:17:18.290
to change by all that much.

01:17:21.540 --> 01:17:24.110
So putting these
two together, you

01:17:24.110 --> 01:17:30.650
see that the energy still goes
up by, let's say, at least 1/2

01:17:30.650 --> 01:17:35.780
of epsilon to the 5th power.

01:17:35.780 --> 01:17:39.800
And so then, the rest of the
proof runs the same as before.

01:17:39.800 --> 01:17:42.590
You finish in some
bounded number of steps.

01:17:42.590 --> 01:17:44.930
And you result in an
equitable partition

01:17:44.930 --> 01:17:46.990
that's epsilon regular.

01:17:46.990 --> 01:17:48.790
I don't want to
belabor the details.

01:17:48.790 --> 01:17:50.582
I mean, here, there's
some things to check,

01:17:50.582 --> 01:17:52.960
but it's, I think,
fairly routine.

01:17:52.960 --> 01:17:56.960
It's is more of an exercise
in technical details.

01:17:56.960 --> 01:18:01.070
But the thing that actually
is somewhat important

01:18:01.070 --> 01:18:04.277
is there's a wrong
way to do this.

01:18:04.277 --> 01:18:06.360
I just want to point out
that what's the wrong way

01:18:06.360 --> 01:18:09.610
to do this, is that you
apply regularity lemma,

01:18:09.610 --> 01:18:11.150
and you think now
it has something

01:18:11.150 --> 01:18:12.650
that's epsilon regular.

01:18:12.650 --> 01:18:18.350
Then I massage it to try to
make it equitable at the end.

01:18:18.350 --> 01:18:21.040
And so if I don't
look into the proof,

01:18:21.040 --> 01:18:23.500
I just look at a statement of
Szemeredi's regularity lemma,

01:18:23.500 --> 01:18:25.490
and I get something
that's epsilon regular,

01:18:25.490 --> 01:18:27.532
I say I'm just going to
divide things up a little

01:18:27.532 --> 01:18:30.000
bit further, that doesn't work.

01:18:30.000 --> 01:18:32.280
Because the property
of being epsilon

01:18:32.280 --> 01:18:37.340
regular is actually not
preserved under refinement.

01:18:37.340 --> 01:18:38.560
So look at the definition.

01:18:38.560 --> 01:18:40.310
You have something
that's epsilon regular.

01:18:40.310 --> 01:18:41.450
You refine the partition.

01:18:41.450 --> 01:18:45.960
If might fail to
be epsilon regular.

01:18:45.960 --> 01:18:51.290
So you really have to take into
the proof to get equitability.

01:18:51.290 --> 01:18:54.220
So just to repeat, a wrong
way to try to get equitability

01:18:54.220 --> 01:18:56.930
is to apply regularity
lemma, and at the end,

01:18:56.930 --> 01:18:59.420
try to massage it
to get equitable.

01:18:59.420 --> 01:19:01.820
That doesn't work.

01:19:01.820 --> 01:19:05.690
Next time, I will show you how
to apply Szemeredi's regularity

01:19:05.690 --> 01:19:07.240
lemma.