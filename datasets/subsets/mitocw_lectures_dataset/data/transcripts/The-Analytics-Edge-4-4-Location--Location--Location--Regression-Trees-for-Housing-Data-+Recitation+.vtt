WEBVTT

00:00:04.500 --> 00:00:07.970
In the previous video, we got
a feel for how regression trees

00:00:07.970 --> 00:00:10.970
can do things linear
regression cannot.

00:00:10.970 --> 00:00:13.290
But what really matters
at the end of the day

00:00:13.290 --> 00:00:16.790
is whether it can predict things
better than linear regression.

00:00:16.790 --> 00:00:19.420
And so let's try that right now.

00:00:19.420 --> 00:00:21.420
We're going to try to
predict house prices using

00:00:21.420 --> 00:00:24.060
all the variables we
have available to us.

00:00:24.060 --> 00:00:28.990
So we'll load the
caTools library.

00:00:28.990 --> 00:00:33.170
That will help us do
a split on the data.

00:00:33.170 --> 00:00:37.120
We'll set the seed so our
results are reproducible.

00:00:37.120 --> 00:00:45.610
And we'll say our split will
be on the Boston house prices

00:00:45.610 --> 00:00:51.620
and we'll split it 70%
training, 30% test.

00:00:51.620 --> 00:00:56.740
So our training data is a
subset of the Boston data

00:00:56.740 --> 00:00:59.600
where the split is TRUE.

00:00:59.600 --> 00:01:04.470
And the testing data is the
subset of the Boston data

00:01:04.470 --> 00:01:07.370
where the split is FALSE.

00:01:07.370 --> 00:01:11.250
OK, first of all, let's make
a linear regression model,

00:01:11.250 --> 00:01:12.840
nice and easy.

00:01:12.840 --> 00:01:17.500
It's a linear model
and the variables

00:01:17.500 --> 00:01:28.870
are latitude, longitude, crime,
zoning, industry, whether it's

00:01:28.870 --> 00:01:37.050
on the Charles River or not,
air pollution, rooms, age,

00:01:37.050 --> 00:01:44.110
distance, another form
of distance, tax rates,

00:01:44.110 --> 00:01:47.620
and the pupil-teacher ratio.

00:01:47.620 --> 00:01:51.770
The data is training data.

00:01:51.770 --> 00:01:57.539
OK, let's see what our
linear regression looks like.

00:01:57.539 --> 00:02:01.040
So we see that the latitude
and longitude are not

00:02:01.040 --> 00:02:03.610
significant for a linear
regression, which is perhaps

00:02:03.610 --> 00:02:05.980
not surprising because
linear regression didn't seem

00:02:05.980 --> 00:02:08.660
to be able to take
advantage of them.

00:02:08.660 --> 00:02:11.450
Crime is very important.

00:02:11.450 --> 00:02:14.220
The residential zoning
might be important.

00:02:14.220 --> 00:02:15.600
Whether it's on
the Charles River

00:02:15.600 --> 00:02:18.829
or not is a useful factor.

00:02:18.829 --> 00:02:20.460
Air pollution does
seem to matter--

00:02:20.460 --> 00:02:23.770
the coefficient is
negative, as you'd expect.

00:02:23.770 --> 00:02:26.710
The average number of
rooms is significant.

00:02:26.710 --> 00:02:29.140
The age is somewhat important.

00:02:29.140 --> 00:02:32.170
Distance to centers
of employment (DIS),

00:02:32.170 --> 00:02:34.030
is very important.

00:02:34.030 --> 00:02:37.440
Distance to highways and
tax is somewhat important,

00:02:37.440 --> 00:02:41.920
and the pupil-teacher ratio
is also very significant.

00:02:41.920 --> 00:02:43.340
Some of these might
be correlated,

00:02:43.340 --> 00:02:46.200
so we can't put too much stock
in necessarily interpreting

00:02:46.200 --> 00:02:48.590
them directly, but
it's interesting.

00:02:48.590 --> 00:02:55.130
The adjusted R squared is
0.65, which is pretty good.

00:02:55.130 --> 00:02:59.680
So because it's kind
of hard to compare out

00:02:59.680 --> 00:03:02.340
of sample accuracy
for regression,

00:03:02.340 --> 00:03:04.300
we need to think of how
we're going to do that.

00:03:04.300 --> 00:03:08.120
With classification, we just
say, this method got X% correct

00:03:08.120 --> 00:03:10.480
and this method got Y% correct.

00:03:10.480 --> 00:03:13.190
Well, since we're doing
continuous variables,

00:03:13.190 --> 00:03:16.130
let's calculate the sum
of squared error, which

00:03:16.130 --> 00:03:19.360
we discussed in the original
linear regression video.

00:03:19.360 --> 00:03:24.440
So let's say the linear
regression's predictions are

00:03:24.440 --> 00:03:33.760
predict(linreg, newdat960
of the picture and
the right-hand--

00:03:42.960 --> 00:03:44.810
So the left-hand
side of the tree

00:03:44.810 --> 00:03:48.079
corresponds to the
right-hand side of the map.

00:03:48.079 --> 00:03:49.829
And the right side of
the tree corresponds

00:03:49.829 --> 00:03:51.770
to the left side of the map.

00:03:51.770 --> 00:03:54.340
That's a little
bit of a mouthful.

00:03:54.340 --> 00:03:55.990
Let's see what it
means visually.

00:03:55.990 --> 00:04:01.820
So we'll remember
these values, and we'll

00:04:01.820 --> 00:04:07.460
plot the longitude
and latitude again.

00:04:07.460 --> 00:04:08.510
So here's our map.

00:04:08.510 --> 00:04:09.120
OK.

00:04:09.120 --> 00:04:12.680
So the first split
was on longitude,

00:04:12.680 --> 00:04:16.000
and it was negative 71.07.

00:04:16.000 --> 00:04:19.570
So there's a very handy
command, "abline,"

00:04:19.570 --> 00:04:23.670
which can put horizontal
or vertical lines easily.

00:04:23.670 --> 00:04:27.070
So we're going to put
a vertical line, so v,

00:04:27.070 --> 00:04:32.070
and we wanted to plot
it at negative 71.07.

00:04:32.070 --> 00:04:32.850
OK.

00:04:32.850 --> 00:04:34.760
So that's that first
split from the tree.

00:04:34.760 --> 00:04:37.159
It corresponds to being on
either the left or right-hand

00:04:37.159 --> 00:04:40.909
side of this tree.

00:04:40.909 --> 00:04:48.240
We'll plot the-- what we want to
do is, we'll focus on one area.

00:04:48.240 --> 00:04:53.040
We'll focus on the lowest
price prediction, which

00:04:53.040 --> 00:04:55.050
is in the bottom left
corner of the tree,

00:04:55.050 --> 00:04:57.140
right down the bottom left
after all those splits.

00:04:57.140 --> 00:04:58.550
So that's where
we want to get to.

00:04:58.550 --> 00:05:01.640
So let's plot again the points.

00:05:01.640 --> 00:05:03.400
Plot a vertical line.

00:05:03.400 --> 00:05:06.340
The next split down towards
that bottom left corner

00:05:06.340 --> 00:05:12.900
was a horizontal line at 42.21.

00:05:12.900 --> 00:05:14.970
So I put that in.

00:05:14.970 --> 00:05:15.770
That's interesting.

00:05:15.770 --> 00:05:18.000
So that line corresponds
pretty much to where

00:05:18.000 --> 00:05:20.940
the Charles River
was from before.

00:05:20.940 --> 00:05:23.600
The final split you need to get
to that bottom left corner I

00:05:23.600 --> 00:05:27.840
was pointing out is 42.17.

00:05:27.840 --> 00:05:31.260
It was above this line.

00:05:31.260 --> 00:05:32.810
And now that's interesting.

00:05:32.810 --> 00:05:35.960
If we look at the right side
of the middle of the three

00:05:35.960 --> 00:05:37.970
rectangles on the
right side, that

00:05:37.970 --> 00:05:39.340
is the bucket we
were predicting.

00:05:39.340 --> 00:05:42.820
And it corresponds to that
rectangle, those areas.

00:05:42.820 --> 00:05:47.890
That's the South Boston low
price area we saw before.

00:05:47.890 --> 00:05:52.360
So maybe we can make that
more clear by plotting, now,

00:05:52.360 --> 00:05:53.900
the high value prices.

00:05:53.900 --> 00:05:59.210
So let's go back up to where
we plotted all the red dots

00:05:59.210 --> 00:06:00.700
and overlay it.

00:06:00.700 --> 00:06:02.470
So this makes it
even more clear.

00:06:02.470 --> 00:06:06.510
We've correctly shown how the
regression tree carves out

00:06:06.510 --> 00:06:09.120
that rectangle in
the bottom of Boston

00:06:09.120 --> 00:06:13.460
and says that is
a low value area.

00:06:13.460 --> 00:06:15.640
So that's actually
very interesting.

00:06:15.640 --> 00:06:17.690
It's shown us something
that regression trees can

00:06:17.690 --> 00:06:19.890
do that we would never expect
linear regression to be

00:06:19.890 --> 00:06:20.880
able to do.

00:06:20.880 --> 00:06:23.180
So the question we're going
to answer in the next video

00:06:23.180 --> 00:06:26.600
is given that regression trees
can do these fancy things

00:06:26.600 --> 00:06:28.020
with latitude and
longitude, is it

00:06:28.020 --> 00:06:29.890
actually going to help
us to be able to build

00:06:29.890 --> 00:06:32.220:06:40.280 --> 00:06:44.530
So you can see it is pretty much
the same as the other commands.

00:06:44.530 --> 00:06:46.490
Wow okay.

00:06:46.490 --> 00:06:49.360
So those are all the points have
got above-average pollution.

00:06:49.360 --> 00:06:51.200
Looks like my office
is right in the middle.

00:06:53.620 --> 00:06:55.080
Now it kind of
makes sense, though,

00:06:55.080 --> 00:06:58.750
because that's the dense
urban core of Boston.

00:06:58.750 --> 00:07:00.870
If you think of anywhere
where pollution would be,

00:07:00.870 --> 00:07:03.830
you'd think it'd be where the
most cars and the most people

00:07:03.830 --> 00:07:04.330
are.

00:07:06.920 --> 00:07:10.090
So that's kind of interesting.

00:07:10.090 --> 00:07:12.240
Now, before we do
anything more, we

00:07:12.240 --> 00:07:14.450
should probably look at how
prices vary over the area

00:07:14.450 --> 00:07:16.430
as well.

00:07:16.430 --> 00:07:18.540
So let's make a new plot.

00:07:18.540 --> 00:07:20.340
This one's got a few
too many things on it.

00:07:20.340 --> 00:07:24.240
So we'll just plot
again the longitude

00:07:24.240 --> 00:07:26.910
and the latitude for
all census tracts.

00:07:26.910 --> 00:07:30.370
That kind of resets our plot.

00:07:30.370 --> 00:07:34.050
If we look at the distribution
of the housing prices (Boston

00:07:34.050 --> 00:07:40.460
MEDV), we see that
the minimum price

00:07:40.460 --> 00:07:43.500
(remember units are
thousands of dollars,

00:07:43.500 --> 00:07:45.740
so the median value of
owner-occupied homes

00:07:45.740 --> 00:07:51.350
is in thousands of
dollars) is around five,

00:07:51.350 --> 00:07:53.730
the maximum is around 50.

00:07:53.730 --> 00:07:59.750
So let's plot again only the
above-average price points.

00:07:59.750 --> 00:08:01.880
So we'll go:
points(boston$LON[boston$MEDV>=21.2].

00:08:01.880 --> 00:08:24.720
We can also plot the latitude:
boston$LATboston$LAT[boston$MEDV>=21.2].

00:08:24.720 --> 00:08:26.610
We'll reuse that red
color we used for MIT.

00:08:29.310 --> 00:08:32.120
And one more time, with
we'll do the solid dots.

00:08:34.760 --> 00:08:38.650
So what we see now are
all the census tracts

00:08:38.650 --> 00:08:43.110
with above-average
housing prices.

00:08:43.110 --> 00:08:46.140
As you can see, it's
definitely not simple.

00:08:46.140 --> 00:08:50.510
There's census tracts of
above-average and below-average

00:08:50.510 --> 00:08:52.820
mixed in between each other.

00:08:52.820 --> 00:08:54.640
But there are some patterns.

00:08:54.640 --> 00:08:59.130
For example, look at that
dense black bit in the middle.

00:08:59.130 --> 00:09:01.710
That corresponds to most
of the city of Boston,

00:09:01.710 --> 00:09:04.670
especially the southern
parts of the city.

00:09:04.670 --> 00:09:06.810
Also, on the Cambridge
side of the river,

00:09:06.810 --> 00:09:09.580
there's a big chunk there
of dots that are black,

00:09:09.580 --> 00:09:13.930
that are not red, that are
also presumably below average.

00:09:13.930 --> 00:09:16.770
So there's definitely
some structure to it,

00:09:16.770 --> 00:09:18.970
but it's certainly
not simple in relation

00:09:18.970 --> 00:09:21.420
to latitude and
longitude at least.

00:09:21.420 --> 00:09:24.450
We will explore this
more in the next video.